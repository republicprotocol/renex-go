(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,n){"use strict";n.d(t,"a",function(){return c}),n.d(t,"c",function(){return i}),n.d(t,"b",function(){return s}),n.d(t,"d",function(){return l});var r=n(44),a=n(46),o=function(e,t){e._noCapture_||a.withScope(function(n){t.category&&n.setTag("category",t.category),t.level&&n.setLevel(t.level),Object.keys(t).forEach(function(e){n.setExtra(e,t[e])}),n.setExtra("caught",!0),n.setExtra("zRawError",function(t){var n=[],r=JSON.stringify(t,function(t,r){if("request"===t)return"... omitted";if(n&&"object"===typeof r&&null!==r){if(-1!==n.indexOf(r))try{return JSON.parse(JSON.stringify(r))}catch(e){return}n.push(r)}return r});return n=null,r}(e)),console.error(e);var r=window.NETWORK.network;"mainnet"!==r&&(r=(r||"").toUpperCase(),"string"===typeof e?e="[".concat(r,"] ").concat(e):e.message="[".concat(r,"] ").concat(e.message||e)),a.captureException(e)})},c=function(e,t){o(e,Object(r.a)({},t,{category:"background_exception"}))},i=function(e,t){o(e,Object(r.a)({},t,{category:"interaction_exception"}))},s=function(e,t){o(e,Object(r.a)({},t,{description:"Error caught in Error Boundary. See Component stack trace.",category:"component_exception"}))},l=function(e){return e._noCapture_=!0,e}},144:function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"a",function(){return s});var r=n(1),a=n.n(r),o=n(3),c=n(10),i=function(){var e=Object(o.a)(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.ethereum){e.next=12;break}return e.prev=1,e.next=4,window.ethereum.enable();case 4:return e.abrupt("return",window.ethereum);case 7:throw e.prev=7,e.t0=e.catch(1),Object(c.d)(new Error("Please allow RenEx to access your MetaMask wallet"));case 10:e.next=14;break;case 12:if(!window.web3){e.next=14;break}return e.abrupt("return",window.web3.currentProvider);case 14:throw Object(c.d)(new Error("Please ensure you have MetaMask installed"));case 15:case"end":return e.stop()}},e,this,[[1,7]])}));return function(){return e.apply(this,arguments)}}(),s={name:"MetaMask",slug:"metamask",description:"Sign in using the MetaMask extension or a Web3 browser",enabled:!0,getWeb3Provider:function(){var e=Object(o.a)(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i();case 2:return t=e.sent,e.abrupt("return",[t,null]);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}},22:function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"a",function(){return o});var r=n(8),a=Object(r.createStandardAction)("SET_POPUP")(),o=Object(r.createStandardAction)("CLEAR_POPUP")()},27:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(0),a=function(e){var t=e.alt;return r.createElement("div",{className:"loading lds-dual-ring ".concat(t?"alt":"")})}},28:function(e,t,n){"use strict";var r=n(1),a=n.n(r),o=n(3),c=n(93),i=n.n(c),s=n(94),l=n.n(s),u=n(15),d=n(22),p=n(71),m=n(29),h=n(362),f=n(0),b=n(365),v=n.n(b),E=n(366),g=n.n(E),y=n(45),w=n.n(y),O=n(143),k=n.n(O),T=n(5),j=n(11),S=n(6),x=n(4),C=n(7),A=n(112),N=n(27),U=n(10),L=new RegExp(/^m\/(44'\/(?:0?1|60|61)')(\/\d\d?'?)*$/),B=[{value:"m/44'/60'/0'/0",label:"Default Derivation - m/44'/60'/0'/0"},{value:"m/44'/1'/0'/0",label:"Testnet - m/44'/1'/0'/0"}],D=function(e){function t(e){var n;return Object(T.a)(this,t),(n=Object(S.a)(this,Object(x.a)(t).call(this,e))).validatePath=function(e){return L.test(e)},n.handleChange=function(e){n.setState({derivation:e})},n.handleUnlock=function(){var e=Object(o.a)(a.a.mark(function e(t){var r,o,c,i,s;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),r=n.props,o=r.checkConnection,c=r.resolve,i=n.state.derivation,n.setState({loading:!0}),e.prev=4,s=i.value){e.next=8;break}throw Object(U.d)(new Error("Invalid derivation"));case 8:return e.t0=c,e.next=11,o({derivation:s});case 11:e.t1=e.sent,(0,e.t0)(e.t1),e.next=20;break;case 15:return e.prev=15,e.t2=e.catch(4),e.t2.message.match(/invalid transport instance/)?e.t2=Object(U.d)(new Error("Unable to connect to Ledger.")):(Object(U.c)(e.t2,{description:"Error in LedgerPopup.checkConnection",shownToUser:"In LedgerPopup as message box"}),e.t2=new Error(e.t2?e.t2.message||e.t2:"Unable to connect to Ledger.")),n.setState({loading:!1,error:e.t2.message}),e.abrupt("return");case 20:case"end":return e.stop()}},e,this,[[4,15]])}));return function(t){return e.apply(this,arguments)}}(),n.state={loading:!1,error:null,derivation:B[0]},n}return Object(C.a)(t,e),Object(j.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.state,t=e.error,n=e.loading;return f.createElement("div",{className:"popup ledger"},f.createElement("div",null,f.createElement("h2",null,"Connect to Ledger Wallet"),f.createElement("div",{className:"ledger--instructions"},f.createElement("p",null,"Before connecting to your Ledger, make sure you have:"),f.createElement("ol",null,f.createElement("li",null,"Connected and unlocked your Ledger"),f.createElement("li",null,"Opened the Ethereum app on the device"),f.createElement("li",null,"Enabled browser and data support"))),null!==t?f.createElement("p",{className:"red"},t):null,f.createElement("form",{onSubmit:this.handleUnlock},f.createElement(A.a,{value:this.state.derivation,onChange:this.handleChange,options:B,isValidNewOption:this.validatePath}),f.createElement("button",{type:"submit"},!0===n?f.createElement(N.a,null):"Connect"))))}}]),t}(f.Component),P=n(70),R=function(e){var t=new i.a,n=e;"m/"===n.slice(0,2)&&(n=n.slice(2));var r=g()(function(){return v.a.create()},{networkId:m.b.ethNetworkId,accountsLength:5,path:n});return t.addProvider(r),t.addProvider(new k.a),t.addProvider(new l.a({rpcUrl:m.a})),t.start(),t},M=function(){var e=Object(o.a)(a.a.mark(function e(t){var n,r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=R(t.derivation),e.next=3,Object(P.a)(new w.a(n));case 3:if((r=e.sent)&&0!==r.length){e.next=6;break}throw new Error("Unable to read accounts.");case 6:return e.abrupt("return",[n,r]);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),_={name:"Ledger",slug:"ledger",description:"Sign in using your Ledger hardware wallet",enabled:!0,getWeb3Provider:function(){var e=Object(o.a)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Symbol(),e.abrupt("return",K(n,function(){var e=Object(o.a)(a.a.mark(function e(r,o){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:p.store.dispatch(Object(d.b)({uuid:n,popup:f.createElement(D,{resolve:r,reject:o,address:t,checkConnection:M}),onCancel:function(){o(Object(U.d)(new Error(W)))}}));case 1:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},I={name:"Private Key",slug:"key",description:"",enabled:!1,getWeb3Provider:function(){return[q(),null]}},F={name:"Trezor",slug:"trezor",description:"Sign using your hardware wallet",enabled:!1,getWeb3Provider:function(){return[q(),null]}},V=n(144);n.d(t,"a",function(){return W}),n.d(t,"b",function(){return Y}),n.d(t,"d",function(){return H}),n.d(t,"f",function(){return z}),n.d(t,"g",function(){return q}),n.d(t,"c",function(){return K}),n.d(t,"e",function(){return G});var H,W="Transaction canceled",Y="Trader verification failed";!function(e){e[e.MetaMask=0]="MetaMask",e[e.Ledger=1]="Ledger",e[e.Trezor=2]="Trezor",e[e.Keystore=3]="Keystore",e[e.PrivateKey=4]="PrivateKey"}(H||(H={}));var z=Object(u.a)([H.MetaMask,H.Ledger,H.Keystore,H.Trezor,H.PrivateKey]),q=function(){var e=new i.a;return e.addProvider(new l.a({rpcUrl:m.a})),e.start(),e},K=function(){var e=Object(o.a)(a.a.mark(function e(t,n){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,r){n(function(n){p.store.dispatch(Object(d.a)({uuid:t})),e(n)},function(e){p.store.dispatch(Object(d.a)({uuid:t})),r(e)})}));case 1:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),G=Object(u.b)().set(H.MetaMask,V.a).set(H.Ledger,_).set(H.Keystore,h.a).set(H.Trezor,F).set(H.PrivateKey,I)},29:function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return o});var r=window.NETWORK,a="/"===r.infura[r.infura.length-1]?"":"/",o="".concat(r.infura).concat(a).concat(window.INFURA_KEY)},362:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return O});var r=n(1),a=n.n(r),o=n(3),c=n(150),i=n(0),s=n(363),l=n.n(s),u=n(93),d=n.n(u),p=n(94),m=n.n(p),h=n(143),f=n.n(h),b=n(22),v=n(364),E=n(71),g=n(29),y=n(28),w=n(10),O={name:"Keystore File",slug:"keystore",description:"Sign in using a Keystore JSON file",enabled:!0,getWeb3Provider:function(){var t=Object(o.a)(a.a.mark(function t(n){var r;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=Symbol(),t.abrupt("return",Object(y.c)(r,function(){var t=Object(o.a)(a.a.mark(function t(s,u){var p,h,O,k,T,j,S,x;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new Promise(function(){var e=Object(o.a)(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:E.store.dispatch(Object(b.b)({uuid:r,popup:i.createElement(v.a,{resolve:t,reject:u,address:n}),onCancel:function(){u(new Error(y.a))}}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}());case 2:if(p=t.sent,h=p.keystore,O=p.password,h.Crypto&&!h.crypto&&(h.crypto=h.Crypto),k=parseInt(h.version,10),t.prev=7,1!==k){t.next=12;break}T=c.fromV1(h,O),t.next=23;break;case 12:if(3!==k){t.next=16;break}T=c.fromV3(h,O),t.next=23;break;case 16:if(!h.privateKey){t.next=22;break}"0x"===(j=h.privateKey).slice(0,2)&&(j=j.slice(2)),T=c.fromPrivateKey(new e(j,"hex")),t.next=23;break;case 22:throw new Error("Unsupported keystore format");case 23:if(T){t.next=25;break}throw new Error("Unable to retrieve account from keystore");case 25:t.next=32;break;case 27:return t.prev=27,t.t0=t.catch(7),console.warn(t.t0),"Not a V3 wallet"===t.t0.message||"Not a V1 wallet"===t.t0.message?u(new Error("Unsupported keystore format")):"Unsupported keystore format"===t.t0.message?u(t.t0):"Unable to retrieve account from keystore"===t.t0.message?u(t.t0):u(Object(w.d)(new Error("Unable to unlock keystore - the password may be wrong"))),t.abrupt("return");case 32:T.getAddressesString=function(){return"0x".concat(T.getAddress().toString("hex"))},S=new l.a(T,{}),(x=new d.a).addProvider(S),x.addProvider(new f.a),x.addProvider(new m.a({rpcUrl:g.a})),x.start(),s([x,null]);case 40:case"end":return t.stop()}},t,this,[[7,27]])}));return function(e,n){return t.apply(this,arguments)}}()));case 2:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}}).call(this,n(12).Buffer)},364:function(e,t,n){"use strict";n.d(t,"a",function(){return p});var r=n(40),a=n(44),o=n(5),c=n(11),i=n(6),s=n(4),l=n(7),u=n(0),d=n(27),p=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(i.a)(this,Object(s.a)(t).call(this,e))).handleInput=function(e){var t=e.target;n.setState(function(e){return Object(a.a)({},e,Object(r.a)({},t.name,t.value))})},n.handleUpload=function(e){if(null!==e.target.files&&0!==e.target.files.length){var t=e.target.files[0],r=new FileReader;r.onload=function(e){var t;try{t=JSON.parse(e.target.result)}catch(r){return void n.setState({error:"Please select a valid Keystore file"})}n.setState({error:null,keystore:t})},r.readAsText(t)}},n.handleUnlock=function(e){if(e.preventDefault(),n.state.keystore){n.setState({loading:!0});var t=n.state.keystore,r=void 0===n.state.password?"":n.state.password;n.props.resolve({keystore:t,password:r})}else console.error("Invalid keystore")},n.state={error:null,keystore:null,loading:!1,password:""},n}return Object(l.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.state,t=e.error,n=e.password,r=e.loading,a=this.props.address;return u.createElement("div",{className:"popup keystore"},u.createElement("div",null,u.createElement("h2",null,a?"Log in to ".concat(a):"Select an account:"),u.createElement("form",{onSubmit:this.handleUnlock},u.createElement("input",{type:"file",name:"files[]",placeholder:"Upload",onChange:this.handleUpload}),u.createElement("input",{type:"password",name:"password",placeholder:"Password (optional)",value:n,onChange:this.handleInput}),u.createElement("button",{type:"submit"},!0===r?u.createElement(d.a,null):"Unlock")),null!==t?u.createElement("p",{className:"red"},t):null))}}]),t}(u.Component)},377:function(e,t,n){e.exports=n(71)},415:function(e,t){},417:function(e,t){},440:function(e,t){},485:function(e,t){},590:function(e,t){},70:function(e,t,n){"use strict";n.d(t,"a",function(){return c}),n.d(t,"b",function(){return i}),n.d(t,"c",function(){return s});var r=n(1),a=n.n(r),o=n(3),c=function(){var e=Object(o.a)(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.eth.getAccounts());case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),i=function(){var e=Object(o.a)(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.eth.net.getNetworkType());case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),s=function(){var e=Object(o.a)(a.a.mark(function e(t,n){var r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.toLowerCase(),e.abrupt("return",c(t).then(function(e){return e.map(function(e){return e.toLowerCase()}).includes(r)}));case 2:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},71:function(e,t,n){"use strict";n.r(t);var r,a=n(46),o=n(0),c=n.n(o),i=n(83),s=n(14),l=n(95),u=n(361),d=n(1),p=n.n(d),m=n(3),h=n(5),f=n(11),b=n(6),v=n(4),E=n(7),g=n(45),y=n.n(g),w=n(978),O=n(975),k=n(977),T=n(976),j=n(17),S=n(8),x=Object(S.createStandardAction)("SET_ALERT")(),C=Object(S.createStandardAction)("CLEAR_ALERT")(),A=n(22),N=n(15),U=n(2),L=n.n(U),B=n(55),D=n(34),P=n.n(D),R=n(9),M=n.n(R),_=function(e,t){var n,r=(n=t.countDown?P.a.duration(P.a.unix(e).diff(P()())):P.a.duration(P()().diff(P.a.unix(e)))).asDays(),a=n.asHours(),o=n.asMinutes(),c=n.asSeconds(),i=t.suffix?" ".concat(t.suffix):"";return r>2?(r=Math.round(r),"".concat(r," ").concat(1===r?"day":"days").concat(i)):a>=1?(a=Math.round(a),"".concat(a," ").concat(1===a?"hour":"hours").concat(i)):o>=1?(o=Math.round(o),"".concat(o," ").concat(1===o?"minute":"minutes").concat(i)):t.showingSeconds&&c>=1?(c=Math.floor(c),"".concat(c," ").concat(1===c?"second":"seconds").concat(i)):"".concat(t.message)},I=function(){var e=Object(m.a)(p.a.mark(function e(t){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e){return setTimeout(e,t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}();!function(e){e[e.Second=1e3]="Second",e[e.Minute=6e4]="Minute",e[e.Hour=36e5]="Hour",e[e.Day=864e5]="Day"}(r||(r={}));var F,V=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=(t=P.a.unix(e).isBefore(P()())?P.a.duration(P()().diff(P.a.unix(e))):P.a.duration(P.a.unix(e).diff(P()()))).asDays(),o=t.asHours(),c=t.asMinutes();return a>2?r.Day:o>=1?r.Hour:c>=1||!n?r.Minute:r.Second},H=function(e,t){if(e.isZero())return new M.a(t).toFixed();var n=1-Math.floor(Math.log10(t)),r=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(e.isEqualTo(0))return[0,0];var a,o=Math.floor(Math.log10(e.toNumber()))-(t-1),c=new M.a(10).exponentiatedBy(new M.a(o).toNumber());if(a=r?Math.floor(e.div(c.toNumber()).toNumber()):Math.ceil(e.div(c.toNumber()).toNumber()),n)for(;a%10===0&&0!==a;)a/=10,o+=1;return[a,o]}(e,n,!1),a=Object(B.a)(r,2)[1],o=new M.a(10).pow(a+(n-1));return new M.a(t).times(o).toFixed()},W=function(e){return H(e,.005)},Y=function(e){return H(e,.2)},z=n(10),q=n(29);!function(e){e[e.WBTC_BTC=2]="WBTC_BTC",e[e.ETH_BTC=1]="ETH_BTC",e[e.REN_BTC=65536]="REN_BTC",e[e.TUSD_BTC=257]="TUSD_BTC",e[e.DGX_ETH=4294967552]="DGX_ETH",e[e.TUSD_ETH=4294967553]="TUSD_ETH",e[e.REN_ETH=4295032832]="REN_ETH",e[e.ZRX_ETH=4295032833]="ZRX_ETH",e[e.OMG_ETH=4295032834]="OMG_ETH"}(F||(F={}));var K=Object(N.c)().set(F.ETH_BTC,{code:F.ETH_BTC,orderSettlement:U.OrderSettlement.RenExAtomic,quoteToken:U.Token.BTC,baseToken:U.Token.ETH,category:U.Token.BTC}).set(F.WBTC_BTC,{code:F.WBTC_BTC,orderSettlement:U.OrderSettlement.RenExAtomic,quoteToken:U.Token.BTC,baseToken:U.Token.WBTC,category:U.Token.BTC,fixedPrice:new M.a(1)}).set(F.REN_BTC,{code:F.REN_BTC,orderSettlement:U.OrderSettlement.RenExAtomic,quoteToken:U.Token.BTC,baseToken:U.Token.REN,category:U.Token.BTC}).set(F.TUSD_BTC,{code:F.TUSD_BTC,orderSettlement:U.OrderSettlement.RenExAtomic,quoteToken:U.Token.BTC,baseToken:U.Token.TUSD,category:U.Token.BTC}).set(F.REN_ETH,{code:F.REN_ETH,orderSettlement:U.OrderSettlement.RenExAtomic,quoteToken:U.Token.ETH,baseToken:U.Token.REN}).set(F.DGX_ETH,{code:F.DGX_ETH,orderSettlement:U.OrderSettlement.RenExAtomic,quoteToken:U.Token.ETH,baseToken:U.Token.DGX}).set(F.TUSD_ETH,{code:F.TUSD_ETH,orderSettlement:U.OrderSettlement.RenExAtomic,quoteToken:U.Token.ETH,baseToken:U.Token.TUSD}).set(F.ZRX_ETH,{code:F.ZRX_ETH,orderSettlement:U.OrderSettlement.RenExAtomic,quoteToken:U.Token.ETH,baseToken:U.Token.ZRX}).set(F.OMG_ETH,{code:F.OMG_ETH,orderSettlement:U.OrderSettlement.RenExAtomic,quoteToken:U.Token.ETH,baseToken:U.Token.OMG}),G=Object(N.b)(),X={name:"Unknown",symbol:"???",icon:"",address:"0x0000000000000000000000000000000000000000",pairs:Object(N.c)(),digits:0,cmcID:0,coingeckoID:"",settlements:[],offChain:!1};G=(G=(G=(G=(G=(G=(G=(G=G.set(U.Token.BTC,{name:"Bitcoin",symbol:"BTC",icon:"btc.svg",address:"",pairs:Object(N.c)().set(U.Token.ETH,F.ETH_BTC).set(U.Token.WBTC,F.WBTC_BTC).set(U.Token.REN,F.REN_BTC).set(U.Token.TUSD,F.TUSD_BTC),digits:8,cmcID:1,coingeckoID:"bitcoin",settlements:[U.OrderSettlement.RenExAtomic],offChain:!0})).set(U.Token.ETH,{name:"Ethereum",symbol:"ETH",icon:"eth.svg",address:"0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE",pairs:Object(N.c)().set(U.Token.DGX,F.DGX_ETH).set(U.Token.TUSD,F.TUSD_ETH).set(U.Token.REN,F.REN_ETH).set(U.Token.OMG,F.OMG_ETH).set(U.Token.ZRX,F.ZRX_ETH),digits:18,cmcID:1027,coingeckoID:"ethereum",settlements:[U.OrderSettlement.RenEx,U.OrderSettlement.RenExAtomic]})).set(U.Token.WBTC,{name:"Wrapped Bitcoin",symbol:"WBTC",icon:"wbtc.svg",address:"",pairs:Object(N.c)(),digits:8,cmcID:1,coingeckoID:"bitcoin",settlements:[U.OrderSettlement.RenExAtomic],offChain:!0})).set(U.Token.DGX,{name:"Digix Gold Token",symbol:"DGX",icon:"dgx.svg",address:q.b.tokens.DGX,pairs:Object(N.c)(),digits:9,cmcID:2739,coingeckoID:"digix-gold",settlements:[U.OrderSettlement.RenEx,U.OrderSettlement.RenExAtomic]})).set(U.Token.REN,{name:"Republic Protocol",symbol:"REN",icon:"ren.svg",address:q.b.tokens.REN,pairs:Object(N.c)(),digits:18,cmcID:2539,coingeckoID:"republic-protocol",settlements:[U.OrderSettlement.RenEx,U.OrderSettlement.RenExAtomic]})).set(U.Token.TUSD,{name:"TrueUSD",symbol:"TUSD",icon:"tusd.svg",address:q.b.tokens.TUSD,pairs:Object(N.c)(),digits:18,cmcID:2563,coingeckoID:"true-usd",settlements:[U.OrderSettlement.RenEx,U.OrderSettlement.RenExAtomic]})).set(U.Token.OMG,{name:"OmiseGo",symbol:"OMG",icon:"omg.svg",address:q.b.tokens.OMG,pairs:Object(N.c)(),digits:18,cmcID:1808,coingeckoID:"omisego",settlements:[U.OrderSettlement.RenEx,U.OrderSettlement.RenExAtomic]})).set(U.Token.ZRX,{name:"0x",symbol:"ZRX",icon:"zrx.svg",address:q.b.tokens.ZRX,pairs:Object(N.c)(),digits:18,cmcID:1896,coingeckoID:"0x",settlements:[U.OrderSettlement.RenEx,U.OrderSettlement.RenExAtomic]});var Z=function(){var e=Object(m.a)(p.a.mark(function e(t,n){var r,a,o,c,i,s,l;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=G.get(t,void 0),a=G.get(n,void 0),void 0!==r&&void 0!==a){e.next=4;break}return e.abrupt("return",[0,0]);case 4:return o="https://api.coingecko.com/api/v3/coins/".concat(a.coingeckoID,"?localization=false&tickers=false&market_data=true&community_data=false&developer_data=false&sparkline=false"),e.next=7,fetch(o);case 7:return c=e.sent,e.next=10,c.json();case 10:return i=e.sent,s=i.market_data.current_price[r.symbol.toLowerCase()],null===(l=i.market_data.price_change_percentage_24h_in_currency[r.symbol.toLowerCase()])&&(l=0),null===s&&(s=0),e.abrupt("return",[s,l]);case 16:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),J=function(e){return e.filter(function(e){return void 0!==e&&-1!==G.get(e,X).settlements.indexOf(U.OrderSettlement.RenEx)}).toList()},$=function(e){return e.filter(function(e){return void 0!==e&&-1!==G.get(e,X).settlements.indexOf(U.OrderSettlement.RenExAtomic)}).toList()},Q=n(153),ee=function(e){return function(e){function t(e){return Object(h.a)(this,t),Object(b.a)(this,Object(v.a)(t).call(this,N.e(e||{})))}return Object(E.a)(t,e),Object(f.a)(t,[{key:"get",value:function(e){return Object(Q.a)(Object(v.a)(t.prototype),"get",this).call(this,e)}},{key:"set",value:function(e,n){return Object(Q.a)(Object(v.a)(t.prototype),"set",this).call(this,e,n)}},{key:"merge",value:function(e){return Object(Q.a)(Object(v.a)(t.prototype),"merge",this).call(this,e)}}]),t}(N.d(e))},te=function(e){function t(){return Object(h.a)(this,t),Object(b.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(E.a)(t,e),t}(ee({market:F.REN_ETH,orderInputs:{side:U.OrderSide.BUY,pricepoint:"",volume:"",minVolume:""}})),ne=function(e){function t(){return Object(h.a)(this,t),Object(b.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(E.a)(t,e),t}(ee({hiddenOrders:null})),re=function(e){function t(){return Object(h.a)(this,t),Object(b.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(E.a)(t,e),t}(ee({traderOrders:Object(N.c)(),cancelling:Object(N.b)()})),ae=function(e){function t(){return Object(h.a)(this,t),Object(b.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(E.a)(t,e),t}(ee({updateIndex:0,balanceHistory:Object(N.c)()})),oe=function(e){function t(){return Object(h.a)(this,t),Object(b.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(f.a)(t,[{key:"serialize",value:function(){return JSON.stringify({address:this.address,agreedToTerms:this.agreedToTerms,seenMigrationMap:this.seenMigrationMap})}},{key:"deserialize",value:function(e){var t=this;try{var n=JSON.parse(e);t=(t=(t=t.set("address",n.address)).set("agreedToTerms",n.agreedToTerms)).set("seenMigrationMap",Object(N.b)(n.seenMigrationMap))}catch(r){Object(z.a)(r,{description:"cannot deserialize local storage"})}return t}}]),t}(ee({address:null,url:null,agreedToTerms:!1,seenMigrationMap:Object(N.b)(),wallet:null,atomicBalances:Object(N.c)(),usableAtomicBalances:Object(N.c)(),atomicAddresses:Object(N.c)(),atomConnectionStatus:U.AtomicConnectionStatus.NotConnected,legacyBalances:Object(N.c)(),accountLegacyBalances:Object(N.c)(),usableLegacyBalances:Object(N.c)(),noLegacyBalances:null,noLegacyOrders:null}));window.sdk=new L.a(new y.a.providers.HttpProvider(q.a),q.b);var ce,ie,se=function(e){function t(){return Object(h.a)(this,t),Object(b.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(E.a)(t,e),t}(ee({sdk:window.sdk,supportedTokens:Object(N.a)(),supportedAtomicTokens:Object(N.a)(),supportedMarkets:Object(N.a)(),minEthTradeVolume:new M.a(0),darknodeFeePercent:new M.a(0),wrappingFeePercent:new M.a(0)})),le={price:0,percentChange:0},ue=function(e){function t(){return Object(h.a)(this,t),Object(b.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(E.a)(t,e),t}(ee({marketPrices:Object(N.c)()}));!function(e){e.Error="error",e.Warning="warning",e.Success="success"}(ce||(ce={})),function(e){e.Info="info",e.Warning="warning"}(ie||(ie={}));var de,pe=function(e){function t(){return Object(h.a)(this,t),Object(b.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(E.a)(t,e),t}(ee({alertType:ce.Warning,message:""})),me=function(e){function t(){return Object(h.a)(this,t),Object(b.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(E.a)(t,e),t}(ee({pendingAlerts:Object(N.b)(),alert:{message:""}})),he=function(e){function t(){return Object(h.a)(this,t),Object(b.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(E.a)(t,e),t}(ee({stack:Object(N.c)()})),fe=Object(S.createStandardAction)("ADD_PENDING_ALERT")(),be=Object(S.createStandardAction)("REMOVE_PENDING_ALERTS")(),ve=n(28),Ee=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(b.a)(this,Object(v.a)(t).call(this,e)))._isMounted=!1,n.state={error:null,logCount:0},n}return Object(E.a)(t,e),Object(f.a)(t,[{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"componentDidMount",value:function(){var e=Object(m.a)(p.a.mark(function e(){var t,n=this;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this._isMounted=!0,t=this.props.call,e.next=4,t().catch(function(e){var t;e.message.match("User denied transaction signature")?t=ve.a:(Object(z.c)(e,{description:"Error in ApprovalPopup.call()",shownToUser:n._isMounted?"In ApprovalPopup message box":"No, unmounted"}),t=e.message||e),n._isMounted&&n.setState({error:t})});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.error,t=this.props.closePopup,n=o.createElement("h2",null,"Creating transaction..."),r=o.createElement("p",null,"Please wait. Do not close this window.");if(e)switch(e){case ve.a:n=o.createElement("h2",null,"Transaction canceled"),r=o.createElement("p",null);break;default:n=o.createElement("h2",{className:"red"},"Unable to complete transaction"),r=o.createElement("p",null,e)}return o.createElement("div",{className:"popup approve"},n,r,e&&o.createElement("div",{className:"popup--buttons"},o.createElement("button",{onClick:t},"Close")))}}]),t}(o.Component),ge=function(e,t,n){return{uuid:e,popup:o.createElement(Ee,{closePopup:n,call:t}),dismissible:!1,onCancel:n}},ye=n(25),we=n.n(ye),Oe=function(e){function t(){return Object(h.a)(this,t),Object(b.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(E.a)(t,e),t}(ee({symbol:"",side:U.OrderSide.BUY,price:new M.a(0),volume:new M.a(0)})),ke=function(e){function t(){return Object(h.a)(this,t),Object(b.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(E.a)(t,e),t}(ee({symbol:"",baseToken:"",quoteToken:"",side:U.OrderSide.BUY,price:new M.a(0),volume:new M.a(0),minVolume:new M.a(0),type:U.OrderType.LIMIT,orderSettlement:U.OrderSettlement.RenEx,nonce:new we.a(0),expiry:0})),Te=function(e){function t(){return Object(h.a)(this,t),Object(b.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(E.a)(t,e),t}(ee({orderID:"",matchedID:"",receivedVolume:new M.a(0),spentVolume:new M.a(0),fee:new M.a(0),receivedToken:"",spentToken:""})),je=function(e){function t(){return Object(h.a)(this,t),Object(b.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(E.a)(t,e),t}(ee({spendToken:"",receiveToken:"",receiveVolume:new M.a(0),spendVolume:new M.a(0),date:0,feeAmount:new M.a(0),feeToken:"",orderSettlement:U.OrderSettlement.RenEx,nonce:new we.a(0)})),Se={swapServer:void 0,id:"",trader:"",status:U.OrderStatus.NOT_SUBMITTED,matchDetails:void 0,computedOrderDetails:new je,orderInputs:new ke,transactionHash:""},xe=function(e){function t(){return Object(h.a)(this,t),Object(b.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(E.a)(t,e),t}(ee(Se)),Ce={swapServer:!0,id:"",trader:"",status:U.OrderStatus.NOT_SUBMITTED,matchDetails:void 0,computedOrderDetails:new je,orderInputs:new Oe},Ae=function(e){function t(){return Object(h.a)(this,t),Object(b.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(E.a)(t,e),t}(ee(Ce)),Ne=function(e){function t(){return Object(h.a)(this,t),Object(b.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(E.a)(t,e),t}(ee({action:U.BalanceActionType.Withdraw,amount:new M.a(0),time:0,status:U.TransactionStatus.Pending,token:"",trader:"",txHash:"",nonce:void 0})),Ue=function(e){if(e.swapServer){var t={swapServer:e.swapServer,id:e.id,trader:e.trader,status:e.status,matchDetails:e.matchDetails?new Te(e.matchDetails):void 0,computedOrderDetails:new je(e.computedOrderDetails),orderInputs:new Oe(e.orderInputs)};return new Ae(t)}var n={swapServer:e.swapServer,id:e.id,trader:e.trader,status:e.status,matchDetails:e.matchDetails?new Te(e.matchDetails):void 0,computedOrderDetails:new je(e.computedOrderDetails),orderInputs:new ke(e.orderInputs),transactionHash:e.transactionHash};return new xe(n)},Le=Object(S.createStandardAction)("UPDATE_LEGACY_BALANCE")(),Be=Object(S.createStandardAction)("UPDATE_LEGACY_BALANCES")(),De=Object(S.createStandardAction)("UPDATE_USABLE_LEGACY_BALANCES")(),Pe=Object(S.createStandardAction)("UPDATE_USABLE_LEGACY_BALANCE")(),Re=Object(S.createStandardAction)("UPDATE_ACCOUNT_LEGACY_BALANCE")(),Me=Object(S.createStandardAction)("UPDATE_ACCOUNT_LEGACY_BALANCES")(),_e=Object(S.createStandardAction)("UPDATE_ATOMIC_BALANCES")(),Ie=Object(S.createStandardAction)("UPDATE_ATOMIC_ADDRESSES")(),Fe=Object(S.createStandardAction)("UPDATE_USABLE_ATOMIC_BALANCES")(),Ve=function(e,t,n,r,a,o){return function(){var c=Object(m.a)(p.a.mark(function c(i){var s,l,u;return p.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(!(null===r||null===t||null===a||parseFloat(r)<=0||null===e)){c.next=3;break}throw s=null===r?"Amount is invalid":null===t?"Unable to load balances":null===a?"Currency Code is invalid":parseFloat(r)<=0?"Amount is negative":null===e?"Unable to load SDK":"",new Error("".concat("Unable to withdraw funds",": ").concat(s));case 3:if(!(l=new M.a(r)).lte(new M.a(0))){c.next=7;break}return i(x({alert:new pe({message:"Please enter valid input"})})),c.abrupt("return");case 7:if(void 0!==(u=n.get(a,void 0))&&null!==u){c.next=10;break}throw new Error("Unable to read balance of token while withdrawing");case 10:if(!l.gt(u)){c.next=12;break}throw Object(z.d)(new Error("Insufficient balance while withdrawing"));case 12:return c.abrupt("return",new Promise(function(t){var n=Symbol(),r=function(){i(Object(A.a)({uuid:n})),t()},c=function(){var t=Object(m.a)(p.a.mark(function t(){return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.withdraw(l,a,{awaitConfirmation:!1}).then(function(){var t=Object(m.a)(p.a.mark(function t(n){var a,c,s;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.balanceAction,(c=n.promiEvent)?c.on("error",o).once("confirmation",o):o(),s=new Ne(a),i(He([s])),t.next=6,Ye(e)(i);case 6:r();case 7:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()).catch(function(e){throw o(),e}));case 1:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}();i(Object(A.b)(ge(n,c,r)))}));case 13:case"end":return c.stop()}},c,this)}));return function(e){return c.apply(this,arguments)}}()},He=Object(S.createStandardAction)("PUSH_BALANCE")(),We=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(){var r=Object(m.a)(p.a.mark(function r(a){var o;return p.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:o=function(e){return void 0!==e&&e.status===U.TransactionStatus.Pending},n&&(o=function(){return!0}),t.filter(o).valueSeq().toArray().map(function(){var t=Object(m.a)(p.a.mark(function t(n){var r,o;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.fetchBalanceActionStatus(n.txHash);case 3:if((r=t.sent)!==U.TransactionStatus.Replaced){t.next=10;break}return t.next=7,I(5e3);case 7:return t.next=9,e.fetchBalanceActionStatus(n.txHash);case 9:r=t.sent;case 10:r!==n.status&&(r===U.TransactionStatus.Done&&(o=function(){var e=Object(m.a)(p.a.mark(function e(){var t;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=G.get(n.token,X),a(x({alert:new pe({message:"".concat(n.amount," ").concat(t.symbol," has been successfully ").concat(n.action===U.BalanceActionType.Deposit?"deposited":"withdrawn"),alertType:ce.Success})}));case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),a(fe({id:n.txHash,method:o}))),a(He([n.set("status",r)]))),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),Object(z.a)(t.t0,{description:"Error in updateBalancesHistory action"});case 16:case"end":return t.stop()}},t,this,[[0,13]])}));return function(e){return t.apply(this,arguments)}}());case 3:case"end":return r.stop()}},r,this)}));return function(e){return r.apply(this,arguments)}}()},Ye=function(e,t){return function(){var n=Object(m.a)(p.a.mark(function n(r){var a,o,c,i,s,l;return p.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a=!0,o=Object(N.c)(),c=Object(N.c)(),i=Object(N.c)(),n.next=7,e.fetchSupportedTokens();case 7:return s=n.sent,n.next=10,e.fetchBalances(s);case 10:l=n.sent,s.forEach(function(e){var t=null,n=null,r=null,s=l.get(e);s&&(t=s.free,null!==s.free&&null!==s.used&&(n=s.free.plus(s.used),a=a&&n.isZero()),r=s.nondeposited),o=o.set(e,t),c=c.set(e,n),i=i.set(e,r)}),r(De({usableBalances:o})),r(Me({accountBalances:i})),r(Be({balances:c})),r(Lt(a)),n.next=21;break;case 18:n.prev=18,n.t0=n.catch(0),Object(z.a)(n.t0,{description:"Error in getBalances action"});case 21:t&&(r(be({ids:t.keySeq().toArray()})),t.map(function(e,t){e().catch(function(e){Object(z.a)(e,{description:"Error in getBalances action for pending alert ".concat(t)})})}));case 22:case"end":return n.stop()}},n,this,[[0,18]])}));return function(e){return n.apply(this,arguments)}}()},ze=function(e){return function(){var t=Object(m.a)(p.a.mark(function t(n){var r;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.swapperd.isConnected()){t.next=3;break}return Object(z.a)(null,{description:"Cannot get atomic balances. Swapperd is not connected."}),t.abrupt("return");case 3:return t.prev=3,t.next=6,e.fetchSupportedAtomicTokens();case 6:return r=t.sent,t.next=9,Promise.all([e.swapperd.fetchAddresses(r).then(function(e){var t=Object(N.c)();r.map(function(n,r){t=t.set(n,e[r])}),n(Ie({atomicAddresses:t}))}).catch(function(e){Object(z.a)(e,{description:"balancesActions.getAtomicBalances.fetchAddresses"})}),e.swapperd.fetchBalances(r).then(function(e){var t=Object(N.c)(),a=Object(N.c)();r.forEach(function(n){var r=e.get(n);if(r){var o=null;null!==r.free&&null!==r.used&&(o=r.free.plus(r.used)),t=t.set(n,o),a=a.set(n,r.free)}}),n(_e({atomicBalances:t})),n(Fe({usableAtomicBalances:a}))}).catch(function(e){Object(z.a)(e,{description:"balancesActions.getAtomicBalances.fetchBalances"})})]);case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(3),Object(z.a)(t.t0,{description:"Error in getAtomicBalances action"});case 14:case"end":return t.stop()}},t,this,[[3,11]])}));return function(e){return t.apply(this,arguments)}}()},qe=Object(S.createStandardAction)("SET_MARKET")(),Ke=Object(S.createStandardAction)("SET_ORDER")(),Ge=(Object(S.createStandardAction)("SYNC_TRADER_ORDERS")(),Object(S.createStandardAction)("ADD_ORDERS")()),Xe=Object(S.createStandardAction)("UPDATE_ORDER")(),Ze=Object(S.createStandardAction)("UPDATE_ORDER_CANCELLING")(),Je=(Object(S.createStandardAction)("CANCEL_LOCAL_ORDER")(),function(e){return function(t){return void 0!==t&&!(!e&&t.status!==U.OrderStatus.OPEN&&t.status!==U.OrderStatus.NOT_SUBMITTED&&t.status!==U.OrderStatus.CONFIRMED)}}),$e=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(){var r=Object(m.a)(p.a.mark(function r(a){var o,c,i,s,l,u,d,h,f;return p.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:o=t.filter(function(e){return e.computedOrderDetails.orderSettlement===U.OrderSettlement.RenEx}).size,a(Bt(0===o)),c=t.valueSeq().filter(Je(n)).toArray(),i=!0,s=!1,l=void 0,r.prev=6,u=p.a.mark(function t(){var n,r,o;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==(n=h.value)){t.next=3;break}return t.abrupt("return",{v:void 0});case 3:return r=void 0,t.prev=4,t.next=7,e.fetchOrderStatus(n.id);case 7:r=t.sent,t.next=14;break;case 10:return t.prev=10,t.t0=t.catch(4),Object(z.a)(t.t0,{description:"Error in checkOrderStatuses action"}),t.abrupt("return","continue");case 14:if(n.swapServer||n.matchDetails||r!==U.OrderStatus.SETTLED){t.next=27;break}return t.t1=n,t.t2=Te,t.next=19,e.fetchMatchDetails(n.id);case 19:t.t3=t.sent,t.t4=new t.t2(t.t3),n=(n=t.t1.set.call(t.t1,"matchDetails",t.t4)).set("status",U.OrderStatus.SETTLED),o=function(){var e=Object(m.a)(p.a.mark(function e(){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a(Ge([n])),a(x({alert:new pe({alertType:ce.Success,message:"Your order has successfully been settled"})}));case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),a(fe({id:"settled: ".concat(n.id),method:o})),t.next=28;break;case 27:n.status!==r&&a(Xe({orderID:n.id,orderStatus:r}));case 28:case"end":return t.stop()}},t,this,[[4,10]])}),d=c[Symbol.iterator]();case 9:if(i=(h=d.next()).done){r.next=21;break}return r.delegateYield(u(),"t0",11);case 11:f=r.t0,r.t1=f,r.next="continue"===r.t1?15:16;break;case 15:return r.abrupt("continue",18);case 16:if("object"!==typeof f){r.next=18;break}return r.abrupt("return",f.v);case 18:i=!0,r.next=9;break;case 21:r.next=27;break;case 23:r.prev=23,r.t2=r.catch(6),s=!0,l=r.t2;case 27:r.prev=27,r.prev=28,i||null==d.return||d.return();case 30:if(r.prev=30,!s){r.next=33;break}throw l;case 33:return r.finish(30);case 34:return r.finish(27);case 35:case"end":return r.stop()}},r,this,[[6,23,27,35],[28,,30,34]])}));return function(e){return r.apply(this,arguments)}}()},Qe=Object(S.createStandardAction)("STORE_WALLET")(),et=Object(S.createStandardAction)("SEEN_MIGRATION")(),tt=n(27),nt=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(b.a)(this,Object(v.a)(t).call(this,e))).callSign=Object(m.a)(p.a.mark(function e(){var t;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.sign,n.setState({signing:!0,error:null}),e.prev=2,e.next=5,t();case 5:e.next=11;break;case 7:e.prev=7,e.t0=e.catch(2),Object(z.c)(e.t0,{description:"Error in SigningPopup.callSign",shownToUser:"In SigningPopup message box"}),n.setState({error:e.t0.message||e.t0});case 11:n.setState({signing:!1});case 12:case"end":return e.stop()}},e,this,[[2,7]])})),n.state={error:null,signing:!0},n}return Object(E.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=Object(m.a)(p.a.mark(function e(){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.callSign().catch(null);case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.signing,n=e.error,r=this.props.data;return o.createElement("div",{className:"popup sign"},o.createElement("h2",null,"Approve signature"),o.createElement("p",{className:"sign--data"},r.map(function(e,t){return o.createElement("span",{key:t,className:"monospace sign--datum"},e)})),t?o.createElement(o.Fragment,null,o.createElement(tt.a,null)):o.createElement(o.Fragment,null,n?o.createElement("p",{className:"red"},n):null,o.createElement("div",{className:"popup--buttons"},o.createElement("button",{onClick:this.props.closePopup},"Close"),o.createElement("button",{onClick:this.callSign},"Try again"))))}}]),t}(o.Component),rt=Object(S.createStandardAction)("UPDATE_ATOM_CONNECTION_STATUS")(),at=function(e){return function(){var t=Object(m.a)(p.a.mark(function t(n){var r;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.swapperd.refreshStatus();case 2:r=t.sent,n(rt({atomConnectionStatus:r}));case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},ot=function(e){return function(t){return new Promise(function(){var n=Object(m.a)(p.a.mark(function n(r,a){var c,i,s,l,u,d;return p.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.swapperd.getID();case 2:c=n.sent,i=["RenEx:","authorize:","".concat(c)],s=Symbol(),l=function(){var n=Object(m.a)(p.a.mark(function n(){var a;return p.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.swapperd.authorize();case 2:a=n.sent,t(Object(A.a)({uuid:s})),r(a);case 5:case"end":return n.stop()}},n,this)}));return function(){return n.apply(this,arguments)}}(),u=function(){t(Object(A.a)({uuid:s})),a()},d=o.createElement(nt,{data:i,sign:l,closePopup:u}),t(Object(A.b)({uuid:s,popup:d,onCancel:u}));case 9:case"end":return n.stop()}},n,this)}));return function(e,t){return n.apply(this,arguments)}}())}},ct=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(b.a)(this,Object(v.a)(t).call(this,e))).retryAuthorize=Object(m.a)(p.a.mark(function e(){var t;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.sdk,e.next=3,n.handleLinkAtom(function(){return n.props.actions.authorizeSwapper(t)});case 3:case"end":return e.stop()}},e,this)})),n.retryConnect=Object(m.a)(p.a.mark(function e(){var t;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.sdk,e.next=3,n.handleLinkAtom(t.swapperd.resetStatus);case 3:case"end":return e.stop()}},e,this)})),n.handleLinkAtom=function(){var e=Object(m.a)(p.a.mark(function e(t){var r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.props.actions,n.setState({linkError:null,linkPending:!0}),e.abrupt("return",t().then(function(e){n.setState({linkPending:!1}),r.updateAtomConnectionStatus({atomConnectionStatus:e})}).catch(function(e){n.setState({linkError:e&&e.message||e,linkPending:!1})}));case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.state={linkError:null,linkPending:!1},n}return Object(E.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e,t=this.props.atomConnectionStatus,n=this.state,r=n.linkPending,a=n.linkError,c=o.createElement("button",{onClick:this.retryConnect,disabled:r},r?o.createElement(tt.a,null):"Retry");switch(t){case U.AtomicConnectionStatus.NotConnected:e=o.createElement(o.Fragment,null,o.createElement("h2",null,"Could not detect Swapperd"),o.createElement("p",null,"The Swapperd software is required for trading atomic swap pairs and viewing atomic balances. You can download the software using the links below:"),o.createElement("ul",null,o.createElement("li",null,o.createElement("a",{href:"https://releases.republicprotocol.com/swapperd/Swapperd.dmg"},"Swapperd for MacOS")),o.createElement("li",null,o.createElement("a",null,"Swapperd for Windows (coming soon)"))),a&&o.createElement("p",{className:"red"},a),c);break;case U.AtomicConnectionStatus.NotAuthorized:e=o.createElement(o.Fragment,null,o.createElement("p",null,"Your Swapperd has not been configured for this wallet. Please update your Swapperd configuration."),a&&o.createElement("p",{className:"red"},a),c);break;case U.AtomicConnectionStatus.AtomNotAuthorized:e=o.createElement(o.Fragment,null,o.createElement("p",null,"Your Swapperd needs to be authorized to action orders on your behalf."),a&&o.createElement("p",{className:"red"},a),o.createElement("button",{onClick:this.retryAuthorize,disabled:r},r?o.createElement(tt.a,null):a?"Retry":"Authorize"));break;case U.AtomicConnectionStatus.ChangedSwapper:e=o.createElement(o.Fragment,null,o.createElement("p",null,"Your Swapperd details have changed. After ensuring your Swapperd details are correct and have been correctly configured correctly, click the Reconnect button."),a&&o.createElement("p",{className:"red"},a),c);break;case U.AtomicConnectionStatus.InvalidSwapper:e=o.createElement(o.Fragment,null,o.createElement("p",null,"Unable to verify authenticity of Swapperd. Please try updating the application."),a&&o.createElement("p",{className:"red"},a),c);break;case U.AtomicConnectionStatus.ConnectedLocked:e=o.createElement(o.Fragment,null,o.createElement("p",null,"Swapperd is locked. Please unlock to continue."),c);break;case U.AtomicConnectionStatus.ConnectedUnlocked:e=o.createElement(o.Fragment,null,o.createElement("p",null,o.createElement("span",{className:"approve--tick"},"\u2714")," Successfully connected."));break;default:e=o.createElement("p",null,"Unknown Swapperd connection status: ",t)}return o.createElement("div",{className:"order--wrapper"},e)}}]),t}(o.Component),it=Object(s.b)(function(e){return{sdk:e.sdk.sdk,atomConnectionStatus:e.trader.atomConnectionStatus}},function(e){return{actions:Object(j.b)({authorizeSwapper:ot,updateAtomConnectionStatus:rt},e)}})(ct),st=164,lt=94,ut=8994,dt=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(b.a)(this,Object(v.a)(t).call(this,e))).bottomElement=null,n.render=function(){var e=n.state.level>st+Math.pow(lt,2);return o.createElement("div",{role:"log",className:"monospace console ".concat(e?"enhanced":""),onClick:n.onClickHandler},n.props.logs,o.createElement("div",{ref:n.updateBottomElement}))},n.updateBottomElement=function(e){n.bottomElement=e},n.componentDidMount=function(){n.scrollToBottom()},n.componentWillReceiveProps=function(){n.scrollToBottom()},n.scrollToBottom=function(){n.forceUpdate(function(){n.bottomElement&&n.bottomElement.scrollIntoView({behavior:"smooth"})})},n.onClickHandler=function(e){var t=n.state.level;n.setState({level:t+1})},n.state={level:ut},n}return Object(E.a)(t,e),t}(o.Component),pt=function(e){function t(e){return Object(h.a)(this,t),Object(b.a)(this,Object(v.a)(t).call(this,e))}return Object(E.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props,t=e.spendToken,r=e.receiveToken,a=e.spendVolume,c=e.receiveVolume,i=e.leftArrow,s=n(82)("./".concat(t.icon)),l=n(82)("./".concat(r.icon));return o.createElement("div",{className:"open--tokens"},o.createElement("div",null,o.createElement("img",{alt:"",role:"presentation",src:s}),a&&o.createElement("p",null,a.toFixed()," ",t.symbol)),o.createElement("div",{className:"open--arrow"},i?"\u2190":"\u2192"),o.createElement("div",null,o.createElement("img",{alt:"",role:"presentation",src:l}),c&&o.createElement("p",null,c.toFixed()," ",r.symbol)))}}]),t}(o.Component),mt=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(b.a)(this,Object(v.a)(t).call(this,e)))._isMounted=!1,n.renderConfirm=function(){var e=n.props,t=e.feePercent,r=e.orderInputs,a=r.symbol,c=r.side,i=r.price,s=r.volume,l=r.minVolume,u=a.split("/"),d=Object(B.a)(u,2),p=d[0],m=d[1],h=c===U.OrderSide.BUY?m:p,f=c===U.OrderSide.BUY?p:m,b=G.get(h,X),v=G.get(f,X),E=G.get(p,X),g=G.get(m,X),y=new M.a(s),w=new M.a(l||0),O=y.times(new M.a(i)),k=c===U.OrderSide.BUY?O:y,T=c===U.OrderSide.BUY?y:O,j=f,S=T.times(t);T=T.minus(S);var x=G.get(j,X);return o.createElement(o.Fragment,null,o.createElement("h2",null,"Confirm order details"),o.createElement(pt,{spendToken:b,receiveToken:v,spendVolume:k,receiveVolume:T}),o.createElement("div",{className:"open--details"},o.createElement("p",null,o.createElement("span",null,"Price:")," ",i," ",g.symbol),o.createElement("p",null,o.createElement("span",null,"Minimum Volume:")," ",w.toFixed()," ",E.symbol),o.createElement("p",null,"Includes a ",S.toFixed()," ",x.symbol," fee")),o.createElement("div",{className:"popup--buttons"},o.createElement("button",{className:"open--confirm",onClick:n.onConfirm},o.createElement("span",null,"Confirm")),o.createElement("button",{onClick:n.props.closePopup},"Cancel")))},n.renderOpening=function(){var e=n.state,t=e.error,r=e.logs,a=n.props.closePopup,c=o.createElement("h2",null,"Opening order..."),i=o.createElement("p",null,"Please wait. Do not close this window.");if(t)switch(t.message){case ve.a:c=o.createElement("h2",null,"Order canceled"),i=o.createElement("p",null);break;default:c=o.createElement("h2",{className:"red"},"Unable to complete transaction"),i=o.createElement("p",null,t.message)}return o.createElement(o.Fragment,null,c,i,t&&o.createElement("div",{className:"popup--buttons"},t?o.createElement("button",{onClick:n.onConfirm},"Retry"):o.createElement(o.Fragment,null),o.createElement("button",{onClick:a},"Close")),o.createElement(dt,{logs:r}))},n.onConfirm=Object(m.a)(p.a.mark(function e(){var t,r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.call,n.setState({error:null,confirmed:!0}),r={log:n.log,error:n.error},e.next=5,t(r).catch(function(e){console.error(e),n._isMounted&&n.setState({error:e})});case 5:case"end":return e.stop()}},e,this)})),n.log=function(e){var t=n.state.logCount;n.setState({logCount:t+1,logs:n.state.logs.push(o.createElement("p",{key:t},e))})},n.error=function(e){var t=n.state.logCount;n.setState({logCount:t+1,logs:n.state.logs.push(o.createElement("p",{key:t,className:"red"},e))})},n.state={confirmed:void 0!==e.skipConfirm&&e.skipConfirm,error:null,logCount:0,logs:Object(N.a)()},n}return Object(E.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=Object(m.a)(p.a.mark(function e(){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._isMounted=!0,!this.state.confirmed){e.next=4;break}return e.next=4,this.onConfirm();case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){var e=Object(m.a)(p.a.mark(function e(){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this._isMounted=!1;case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e;return e=this.state.confirmed?this.renderOpening():this.renderConfirm(),o.createElement("div",{className:"popup open"},e)}}]),t}(o.Component),ht=Object(s.b)(function(e){return{feePercent:e.sdk.darknodeFeePercent}},null)(mt),ft=function(e,t,n,r,a){return{uuid:e,popup:o.createElement(ht,{call:n,closePopup:r,orderInputs:t,skipConfirm:a}),dismissible:!1,onCancel:r}},bt=function(e,t,n,r,a,o,c,i,s){return function(){var l=Object(m.a)(p.a.mark(function l(u){var d,h,f,b,v,E,g,y,w;return p.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(d=K.get(t,void 0)){l.next=3;break}return l.abrupt("return");case 3:h=d.orderSettlement===U.OrderSettlement.RenExAtomic,f=new M.a(r),b=new M.a(a),v=new M.a(o),E={symbol:"".concat(d.baseToken,"/").concat(d.quoteToken),side:n,price:f.toFixed(),volume:b,minVolume:v,type:c},g=Symbol(),y=function(){var t=Object(m.a)(p.a.mark(function t(n){return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.openOrder(E,{simpleConsole:n,awaitConfirmation:!1}).then(function(){var t=Object(m.a)(p.a.mark(function t(n){var r;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.traderOrder,u(Ge([Ue(r)])),t.next=4,Ye(e)(u);case 4:u(x({alert:new pe({alertType:ce.Success,message:"Your order has been sent"})})),u(Object(A.a)({uuid:g})),i&&i();case 7:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()).catch(function(){var t=Object(m.a)(p.a.mark(function t(n){return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(s&&s(),!n.message.match("User denied transaction signature")&&!n.message.match(e.errors.UserRejectedSwap)){t.next=3;break}throw Object(z.d)(new Error(ve.a));case 3:throw Object(z.c)(n,{description:"Error opening order",shownToUser:"In OpenOrderPopup in message box"}),n;case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),w=function(){u(Object(A.a)({uuid:g})),s&&s()},u(Object(A.b)(ft(g,E,y,w,h)));case 12:case"end":return l.stop()}},l,this)}));return function(e){return l.apply(this,arguments)}}()},vt=function(e,t){return function(){var n=Object(m.a)(p.a.mark(function n(r){return p.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise(function(n){var a=Symbol(),o=function(){r(Object(A.a)({uuid:a})),n()};r(Ze({orderID:t,orderCancelling:!0}));var c=function(){var n=Object(m.a)(p.a.mark(function n(){var a,c;return p.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.cancelOrder(t,{awaitConfirmation:!1});case 2:if(a=n.sent,c=a.promiEvent){n.next=6;break}throw new Error("Unable to cancel order");case 6:return n.abrupt("return",c.on("transactionHash",Object(m.a)(p.a.mark(function e(){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:o();case 1:case"end":return e.stop()}},e,this)}))).then(function(){r(Xe({orderID:t,orderStatus:U.OrderStatus.CANCELED}));var e=function(){var e=Object(m.a)(p.a.mark(function e(){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r(x({alert:new pe({alertType:ce.Success,message:"Your order has been cancelled"})})),r(Ze({orderID:t,orderCancelling:!1}));case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}();r(fe({id:"cancel: ".concat(t),method:e}))}).catch(function(e){throw r(Ze({orderID:t,orderCancelling:!1})),e}));case 7:case"end":return n.stop()}},n,this)}));return function(){return n.apply(this,arguments)}}();r(Object(A.b)(ge(a,c,o)))}));case 1:case"end":return n.stop()}},n,this)}));return function(e){return n.apply(this,arguments)}}()},Et=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(b.a)(this,Object(v.a)(t).call(this,e))).onMouseEnter=function(e){var t=e.currentTarget.getBoundingClientRect(),r=t.top,a=t.left,o=t.width,c=t.height;n.setState({top:r-c/2,left:a+o/2})},n.state={top:0,left:0},n}return Object(E.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props,t=e.level,n=e.children,r=t||ie.Info;return o.createElement("div",{className:"label"},o.createElement("div",{className:"label--icon ".concat(r,"--icon"),onMouseEnter:this.onMouseEnter}),o.createElement("div",{style:this.state,className:"label--message"},n||""))}}]),t}(o.Component),gt=function(e){function t(e,n){var r;return Object(h.a)(this,t),(r=Object(b.a)(this,Object(v.a)(t).call(this,e,n))).timeout=void 0,r.rerender=void 0,r.state={highlightLatest:!1,receivedOrders:!1,relevantRows:0},r}return Object(E.a)(t,e),Object(f.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.traderOrders.size<e.traderOrders.size?this.state.receivedOrders?(this.setState({highlightLatest:!0}),this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(function(){t.setState({highlightLatest:!1})},3e3)):this.setState({receivedOrders:!0}):this.props.traderOrders.size>e.traderOrders.size&&this.setState({highlightLatest:!1})}},{key:"componentWillUnmount",value:function(){this.timeout&&clearTimeout(this.timeout),this.rerender&&clearTimeout(this.rerender)}},{key:"render",value:function(){var e=this,t=this.props.amountToShow,n=this.props.traderOrders,a=null;if(n.size>0){var c=n.map(function(e){return V(e.computedOrderDetails.date)}).reduce(function(e,t){return Math.min(e,t)},r.Day);this.rerender&&clearTimeout(this.rerender),this.rerender=setTimeout(function(){e.forceUpdate()},c/2),a=this.generateRows()}return o.createElement("div",{className:"trades--table table--wrapper"},o.createElement("table",null,o.createElement("thead",null,o.createElement("tr",null,o.createElement("th",null,"Order ID"),o.createElement("th",null,"From"),o.createElement("th",null,"To"),o.createElement("th",null,"Price"),o.createElement("th",null,"Opened"),o.createElement("th",null,"Status"),o.createElement("th",null,"Cancel?"))),o.createElement("tbody",null,a&&a.length>0?void 0!==t?a.slice(0,t):a:o.createElement("tr",null,o.createElement("td",{colSpan:8},"No submitted orders")))))}},{key:"handleCancel",value:function(){var e=Object(m.a)(p.a.mark(function e(t){var n,r,a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.props,r=n.sdk,a=n.traderOrders,r&&a){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,this.props.actions.cancelOrder(r,t);case 6:e.next=12;break;case 8:e.prev=8,e.t0=e.catch(3),Object(z.c)(e.t0,{description:"Error in SubmittedTradesTable.handleCancel",shownToUser:"As alert",orderID:t}),this.props.actions.setAlert({alert:new pe({alertType:ce.Error,message:"Unable to cancel order"})});case 12:case"end":return e.stop()}},e,this,[[3,8]])}));return function(t){return e.apply(this,arguments)}}()},{key:"generateRows",value:function(){var e=this,t=this.props,n=t.traderOrders,r=t.sdk,a=t.cancelling,c=t.filter,i=this.state.highlightLatest,s=r.swapperd.isConnected();return(c?n.filter(c):n).valueSeq().toArray().reverse().map(function(t,n){var r=G.get(t.computedOrderDetails.spendToken,X),c=G.get(t.computedOrderDetails.receiveToken,X),l=(t.orderInputs.side===U.OrderSide.SELL?c:r).symbol,u=(t.orderInputs.side===U.OrderSide.SELL?r:c).symbol,d=t.computedOrderDetails.receiveVolume,p=t.computedOrderDetails.spendVolume,m="object"===typeof t.orderInputs.price?t.orderInputs.price.toFixed():t.orderInputs.price.toString();return o.createElement("tr",{key:n,className:"".concat(t.status.toLowerCase()," ").concat(0===n&&i?"recent":"")},o.createElement("td",null,o.createElement("span",{className:"monospace"},t.id)),o.createElement("td",{className:"volume right"},o.createElement("span",null,p.toString()," ",r.symbol)),o.createElement("td",{className:"volume right"},o.createElement("span",null,d.toString()," ",c.symbol)),o.createElement("td",{className:"price center"},"".concat(m," ").concat(l," to ").concat(u)),o.createElement("td",{className:"center",title:P()(1e3*t.computedOrderDetails.date).format("MMMM Do YYYY, HH:mm:ss")},o.createElement("span",null,_(t.computedOrderDetails.date,{message:"Just now",suffix:"ago",countDown:!1}))),o.createElement("td",{className:"center"},t.status===U.OrderStatus.NOT_SUBMITTED?o.createElement(tt.a,null):o.createElement("span",null,function(e){switch(e){case U.OrderStatus.NOT_SUBMITTED:return"Pending";case U.OrderStatus.FAILED_TO_SETTLE:return"Failed";case U.OrderStatus.OPEN:return"Open";case U.OrderStatus.CONFIRMED:return"Settling";case U.OrderStatus.CANCELED:return"Canceled";case U.OrderStatus.SETTLED:return"Settled";case U.OrderStatus.SLASHED:return"Aborted";default:return"Unknown"}}(t.status),t.computedOrderDetails.orderSettlement!==U.OrderSettlement.RenExAtomic||t.status!==U.OrderStatus.CONFIRMED||s?null:o.createElement(Et,{level:ie.Warning},"Unable to connect to Swapperd"))),o.createElement("td",{className:"center"},t.status===U.OrderStatus.OPEN?a.get(t.id,!1)?o.createElement(tt.a,null):o.createElement("span",{className:"cross",role:"button",onClick:e.handleCancel.bind(e,t.id)},"\xd7"):o.createElement("span",null,"-")))})}}]),t}(o.Component),yt=Object(s.b)(function(e){return{cancelling:e.traderBook.cancelling,traderOrders:e.traderBook.traderOrders,sdk:e.sdk.sdk}},function(e){return{actions:Object(j.b)({cancelOrder:vt,setAlert:x},e)}})(gt),wt=function(e){function t(e,n){var r;return Object(h.a)(this,t),(r=Object(b.a)(this,Object(v.a)(t).call(this,e,n))).withdraw=function(){var e=Object(m.a)(p.a.mark(function e(t){var n,a,o,c,i,s,l,u,d;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.props,a=n.sdk,o=n.legacyBalances,c=n.usableLegacyBalances,i=r.state.pendingWithdrawal,s=t.target,l=s.value,u=c.get(l)){e.next=8;break}return r.props.actions.setAlert({alert:new pe({message:"Unable to withdraw, please try again."})}),e.abrupt("return");case 8:if(!i){e.next=11;break}return r.props.actions.setAlert({alert:new pe({message:"Please wait until the current withdrawal is complete"})}),e.abrupt("return");case 11:return r.setState({withdrawing:l}),d=function(){try{r.setState({withdrawing:null})}catch(e){}},e.prev=13,e.next=16,r.props.actions.withdraw(a,o,c,u.toFixed(),l,d);case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(13),e.t0.message!==ve.a&&(Object(z.c)(e.t0,{description:"Error in ViewBalancesTable.withdraw",shownToUser:"As alert"}),r.props.actions.setAlert({alert:new pe({alertType:ce.Error,message:e.t0.message||e.t0})})),d();case 22:case"end":return e.stop()}},e,this,[[13,18]])}));return function(t){return e.apply(this,arguments)}}(),r.state={balanceHistorySize:0,pendingWithdrawal:!1,withdrawing:null},r}return Object(E.a)(t,e),Object(f.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.balanceHistory;if(t.size!==this.state.balanceHistorySize||this.state.pendingWithdrawal){this.setState({balanceHistorySize:t.size});var n=t.filter(function(e){return void 0!==e&&e.action===U.BalanceActionType.Withdraw&&e.status===U.TransactionStatus.Pending}).size>0;n!==this.state.pendingWithdrawal&&this.setState({pendingWithdrawal:n})}}},{key:"render",value:function(){var e=this.generateRows();return o.createElement("div",{className:"view--table table--wrapper"},o.createElement("table",null,o.createElement("thead",null,o.createElement("tr",null,o.createElement("th",null,"Token"),o.createElement("th",null,"Locked Balance",o.createElement(Et,null,"If you have any ordered open, please cancel them before withdrawing.")),o.createElement("th",null,"Usable Balance",o.createElement(Et,null,"The amount you have deposited, excluding balances locked in open orders or pending withdrawals.")),o.createElement("th",null))),o.createElement("tbody",null,e&&e.length>0?e:o.createElement("tr",null,o.createElement("td",{colSpan:4},"No balances")))))}},{key:"generateRows",value:function(){var e=this,t=this.props,r=t.legacyBalances,a=t.usableLegacyBalances,c=t.supportedTokens,i=this.state.withdrawing,s=[];return J(c).forEach(function(t){var c=G.get(t,X),l=c.name,u=c.symbol,d=c.icon,p=c.address,m=r.get(t,null),h=a.get(t,null);if(!m||!m.isZero()){var f,b=m&&h?m.minus(h):m,v=!b||b.isZero()?"":o.createElement("span",{className:"red"},b.toFixed()," ",u),E=null!==h?h.toFixed():"-",g=n(82)("./".concat(d));if(t!==U.Token.ETH){var y="".concat(q.b.etherscan,"/token/").concat(p);f=o.createElement("a",{className:"view--external",href:y,rel:"noopener noreferrer",target:"_blank",title:"View on Etherscan"},o.createElement("span",null,"\u2192"))}s.push(o.createElement("tr",{key:t},o.createElement("td",null,o.createElement("img",{alt:"",role:"presentation",src:g}),o.createElement("span",null,"".concat(l," ")),f),o.createElement("td",null,i===t?"":v,null===m&&o.createElement(Et,{level:ie.Warning},"Failed to retrieve locked ",u," balance.")),o.createElement("td",null,"".concat(E," ").concat(u),null===h&&o.createElement(Et,{level:ie.Warning},"Failed to retrieve usable ",u," balance.")),o.createElement("td",{className:"center"},i===t?o.createElement(tt.a,null):o.createElement("button",{disabled:null!==i,value:t,onClick:e.withdraw},"Withdraw"))))}}),s}}]),t}(o.Component),Ot=Object(s.b)(function(e){return{accountLegacyBalances:e.trader.accountLegacyBalances,balanceHistory:e.balanceHistory.balanceHistory,legacyBalances:e.trader.legacyBalances,traderOrders:e.traderBook.traderOrders,usableLegacyBalances:e.trader.usableLegacyBalances,sdk:e.sdk.sdk,supportedTokens:e.sdk.supportedTokens}},function(e){return{actions:Object(j.b)({setAlert:x,withdraw:Ve},e)}})(wt),kt=function(e){return e.computedOrderDetails.orderSettlement===U.OrderSettlement.RenEx&&e.status===U.OrderStatus.OPEN},Tt=function(e){function t(e,n){var r;return Object(h.a)(this,t),(r=Object(b.a)(this,Object(v.a)(t).call(this,e,n))).renderWelcome=function(){return o.createElement(o.Fragment,null,o.createElement("h1",null,"Welcome"),o.createElement("div",{className:"migration--body"},o.createElement("div",{className:"migration--description"},o.createElement("p",null,"RenEx now uses ",o.createElement("i",null,"Swapperd")," for trader balances and order execution. Before continuing, please step through to see the changes.")),o.createElement("div",{className:"migration--buttons"},o.createElement("button",{onClick:r.next},"Next"))))},r.renderAtomicNotice=function(){var e=r.props.atomConnectionStatus!==U.AtomicConnectionStatus.ConnectedUnlocked;return o.createElement(o.Fragment,null,o.createElement("h1",null,"Connect Swapperd"),o.createElement("div",{className:"migration--body"},o.createElement("div",{className:"migration--description"},o.createElement("p",null,"In order to use RenEx, you now use the Swapperd wallet. Connect it to trade:")),o.createElement("div",{className:"migration--frame"},o.createElement(it,null)),o.createElement("div",{className:"migration--buttons"},o.createElement("button",{onClick:r.previous},"Previous"),e?o.createElement("button",{onClick:r.next},"Later"):o.createElement("button",{onClick:r.next,className:"button--blue"},"Next"))))},r.renderCancelOrders=function(){var e=r.props.traderOrders.filter(kt).size>0;return o.createElement(o.Fragment,null,o.createElement("h1",null,"Cancel old orders"),o.createElement("div",{className:"migration--body"},o.createElement("div",{className:"migration--description"},o.createElement("p",null,"RenEx now uses. RenEx now uses a single Atomic swap system for all trades and balances should now be stored in Swapperd to perform trades. Before withdrawing your legacy balances, please cancel your old orders.")),o.createElement("div",{className:"migration--frame"},o.createElement(yt,{filter:kt})),o.createElement("div",{className:"migration--buttons"},o.createElement("button",{onClick:r.previous},"Previous"),e?o.createElement("button",{onClick:r.next},"Later"):o.createElement("button",{onClick:r.next,className:"button--blue"},"Next"))))},r.renderWithdraw=function(){var e=r.props.legacyBalances.filter(function(e){return null!==e&&!e.isZero()}).size>0;return o.createElement(o.Fragment,null,o.createElement("h1",null,"Withdraw legacy balances"),o.createElement("div",{className:"migration--body"},o.createElement("div",{className:"migration--description"},o.createElement("p",null,"Balances are no longer stored in the RenEx balances contract.")),o.createElement("div",{className:"migration--frame"},o.createElement(Ot,null)),o.createElement("div",{className:"migration--buttons"},o.createElement("button",{onClick:r.previous},"Previous"),e?o.createElement("button",{onClick:r.next},"Later"):o.createElement("button",{onClick:r.next,className:"button--blue"},"Next"))))},r.renderClose=function(){return o.createElement(o.Fragment,null,o.createElement("div",{className:"migration--body"},o.createElement("h1",null,"Ready to go"),o.createElement("div",{className:"migration--description"}),o.createElement("div",{className:"migration--buttons"},o.createElement("button",{onClick:r.previous},"Previous"),o.createElement("button",{onClick:r.done,className:"button--blue"},"Close"))))},r.renderLoading=function(){return o.createElement(o.Fragment,null,o.createElement("div",{className:"migration--body"},o.createElement(tt.a,null),o.createElement("br",null),o.createElement("div",{className:"migration--buttons"},o.createElement("button",{onClick:r.previous},"Previous"),o.createElement("button",{onClick:r.next},"Next"))))},r.pages=function(){var e=r.props,t=e.noLegacyBalances,n=e.noLegacyOrders,a=[];return a.push(r.renderWelcome),a.push(r.renderAtomicNotice),null===n?a.push(r.renderLoading):!1===n&&a.push(r.renderCancelOrders),null===t?a.push(r.renderLoading):!1===t&&a.push(r.renderWithdraw),a.push(r.renderClose),a},r.next=function(){r.setState({page:r.state.page+1})},r.previous=function(){r.setState({page:r.state.page-1})},r.done=function(){var e=r.props.address;e&&r.props.actions.seenMigration({address:e,seenMigration:!0}),r.props.onDone()},r.state={page:0},r}return Object(E.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.state.page;return o.createElement("div",{className:"popup migration"},this.pages()[e]())}}]),t}(o.Component),jt=Object(s.b)(function(e){return{legacyBalances:e.trader.legacyBalances,traderOrders:e.traderBook.traderOrders,noLegacyOrders:e.trader.noLegacyOrders,noLegacyBalances:e.trader.noLegacyBalances,atomConnectionStatus:e.trader.atomConnectionStatus,address:e.trader.address}},function(e){return{actions:Object(j.b)({seenMigration:et,clearPopup:A.a},e)}})(Tt),St=function(e,t,n){return{uuid:e,popup:o.createElement(jt,{onDone:n}),dismissible:!0,onCancel:t}},xt=n(72),Ct=Object(xt.a)(),At=n(70),Nt=Object(S.createStandardAction)("STORE_ADDRESS")(),Ut=Object(S.createStandardAction)("STORE_URL")(),Lt=Object(S.createStandardAction)("SET_NO_LEGACY_BALANCES")(),Bt=Object(S.createStandardAction)("SET_NO_LEGACY_ORDERS")(),Dt=function(e,t){return function(){var n=Object(m.a)(p.a.mark(function n(r){return p.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:r(Nt(null)),r(qe({market:F.REN_ETH})),r(Be({balances:Object(N.c)()})),r(De({usableBalances:Object(N.c)()})),r(Me({accountBalances:Object(N.c)()})),r(_e({atomicBalances:Object(N.c)()})),r(Ie({atomicAddresses:Object(N.c)()})),r(Qe({wallet:null})),e.updateProvider(new y.a.providers.HttpProvider(q.a)),e.setAddress(""),a.configureScope(function(e){e.setExtra("loggedIn",!1)}),t.reload&&(Ct.push("/loading"),location.replace("/"));case 12:case"end":return n.stop()}},n,this)}));return function(e){return n.apply(this,arguments)}}()},Pt=function(e,t,n,r,o){return function(){var c=Object(m.a)(p.a.mark(function c(i){var s,l;return p.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Object(At.b)(new y.a(t));case 2:if(c.t0=c.sent,c.t1=q.b.ethNetwork,c.t0===c.t1){c.next=7;break}return Dt(e,{reload:!1})(i).catch(function(e){Object(z.c)(e,{description:"accountActions.login.logout",shownToUser:"No"})}),c.abrupt("return");case 7:a.configureScope(function(e){e.setExtra("loggedIn",!0)}),i(Nt(n)),e.updateProvider(t),e.setAddress(n),e.fetchTraderOrders().then(function(e){return i(Ge(e.map(Ue)))}).catch(function(e){Object(z.a)(e,{description:"accountActions.login.fetchTraderOrders"})}),e.fetchBalanceActions().then(function(e){return i(He(e.map(function(e){return new Ne(e)})))}).catch(function(e){Object(z.a)(e,{description:"accountActions.login.fetchBalanceActions"})}),o.redirect&&Ct.push(o.url?o.url:"/exchange"),r||(s=Symbol(),l=function(){return i(Object(A.a)({uuid:s}))},i(Object(A.b)(St(s,l,l))));case 15:case"end":return c.stop()}},c,this)}));return function(e){return c.apply(this,arguments)}}()},Rt=function(e){return function(){var t=Object(m.a)(p.a.mark(function t(n){var r,a;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.getAddress()){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.getWeb3().eth.getAccounts();case 4:r=(r=t.sent).map(function(e){return e.toLowerCase()}),a=e.getAddress().toLowerCase(),r.includes(a)||(console.warn("User has logged out of their web3 provider (".concat(e.getAddress()," not in [").concat(r.join(", "),"])")),Dt(e,{reload:!0})(n).catch(function(e){Object(z.a)(e,{description:"accountActions.lookForLogout.logout"})}));case 8:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},Mt=n(144),_t=function(e){function t(e,n){var r;return Object(h.a)(this,t),(r=Object(b.a)(this,Object(v.a)(t).call(this,e,n))).DEFAULT_TIME=1e4,r.alertIntervalTimeout=void 0,r.handleClose=function(){r.alertIntervalTimeout&&clearInterval(r.alertIntervalTimeout),r.props.actions.clearAlert()},r}return Object(E.a)(t,e),Object(f.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.alert.message;null!==t&&t!==this.props.alert.message&&(this.alertIntervalTimeout&&clearTimeout(this.alertIntervalTimeout),this.alertIntervalTimeout=setTimeout(this.props.actions.clearAlert,this.DEFAULT_TIME))}},{key:"render",value:function(){var e=this.props.alert.message,t=this.props.alert.alertType;return""===e?o.createElement(o.Fragment,null):o.createElement("div",{role:"alert",className:"alert ".concat(t)},o.createElement("span",{className:"alert--message"},e),o.createElement("span",{role:"button",className:"alert--cross",onClick:this.handleClose},"\xd7"))}}]),t}(o.Component),It=Object(s.b)(function(e){return{alert:e.alert.alert}},function(e){return{actions:Object(j.b)({clearAlert:C},e)}})(_t),Ft=Object(S.createStandardAction)("UPDATE_PRICES")(),Vt=Object(S.createStandardAction)("SET_HIDDEN_ORDERS")(),Ht=function(e){return function(){var t=Object(m.a)(p.a.mark(function t(n){var r;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=N.a,t.next=3,e.fetchOrderbook({limit:10});case 3:t.t1=t.sent,r=(0,t.t0)(t.t1),n(Vt({hiddenOrders:r}));case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},Wt=Object(S.createStandardAction)("STORE_SDK")(),Yt=Object(S.createStandardAction)("STORE_SDK_DATA")(),zt=function(e){function t(e,n){var r;return Object(h.a)(this,t),(r=Object(b.a)(this,Object(v.a)(t).call(this,e,n))).setupLoopsTimeout=void 0,r.callGetLegacyBalancesTimeout=void 0,r.callHiddenOrdersTimeout=void 0,r.callUpdatePricesTimeout=void 0,r.callLookForLogoutTimeout=void 0,r.callConnectToAtomTimeout=void 0,r.callUpdateAtomStatusTimeout=void 0,r.callGetAtomicBalancesTimeout=void 0,r.callCheckOrderStatusesTimeout=void 0,r.callCheckRenExExecutionTimeout=void 0,r.callUpdateBalancesHistoryTimeout=void 0,r.setupLoops=function(){var e=function(){var t=Object(m.a)(p.a.mark(function t(){var n,a,o;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.props,a=n.sdk,o=n.wallet,!a.getAddress()||o!==ve.d.MetaMask){t.next=10;break}return t.prev=2,t.next=5,r.props.actions.lookForLogout(a);case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(2),Object(z.a)(t.t0,{description:"Error in BackgroundTasks.callLookForLogout"});case 10:r.callLookForLogoutTimeout=setTimeout(e,5e3);case 11:case"end":return t.stop()}},t,this,[[2,7]])}));return function(){return t.apply(this,arguments)}}();e().catch(z.a);var t=function(){var e=Object(m.a)(p.a.mark(function e(){var n,a,o;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.props,a=n.sdk,o=n.pendingAlerts,!a.getAddress()){e.next=4;break}return e.next=4,r.props.actions.getLegacyBalances(a,o);case 4:r.callGetLegacyBalancesTimeout=setTimeout(t,5e3);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}();t().catch(z.a);var n=function(){var e=Object(m.a)(p.a.mark(function e(){var t,a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.props.sdk,a=60,null===t||""===t.getAddress()){e.next=13;break}return e.prev=3,e.next=6,r.props.actions.refreshAtomConnectionStatus(t);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),Object(z.a)(e.t0,{description:"Error in BackgroundTasks.callUpdateAtomicStatus"});case 11:e.next=14;break;case 13:a=1;case 14:r.callUpdateAtomStatusTimeout=setTimeout(n,1e3*a);case 15:case"end":return e.stop()}},e,this,[[3,8]])}));return function(){return e.apply(this,arguments)}}();n().catch(z.a);var a=function(){var e=Object(m.a)(p.a.mark(function e(){var t;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=r.props.sdk).getAddress()||!t.swapperd.isConnected()){e.next=10;break}return e.prev=2,e.next=5,r.props.actions.getAtomicBalances(t);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),Object(z.a)(e.t0,{description:"Error in BackgroundTasks.callGetAtomicBalances"});case 10:r.callGetAtomicBalancesTimeout=setTimeout(a,5e3);case 11:case"end":return e.stop()}},e,this,[[2,7]])}));return function(){return e.apply(this,arguments)}}();a().catch(z.a);var o=function(){var e=Object(m.a)(p.a.mark(function e(){var t;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.props.sdk,e.prev=1,e.next=4,r.props.actions.getHiddenOrders(t);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),Object(z.a)(e.t0,{description:"Error in BackgroundTasks.callHiddenOrders"});case 9:r.callHiddenOrdersTimeout=setTimeout(o,3e4);case 10:case"end":return e.stop()}},e,this,[[1,6]])}));return function(){return e.apply(this,arguments)}}();o().catch(z.a);var c=function(){var e=Object(m.a)(p.a.mark(function e(t){var n,a,o,i;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.props,a=n.sdk,o=n.balanceHistory,i=t,!a.getAddress()){e.next=12;break}return e.prev=3,e.next=6,r.props.actions.updateBalancesHistory(a,o,i%60===1);case 6:i+=1,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),Object(z.a)(e.t0,{description:"Error in BackgroundTasks.callUpdateBalancesHistory"});case 12:r.callUpdateBalancesHistoryTimeout=setTimeout(Object(m.a)(p.a.mark(function e(){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",c(i));case 1:case"end":return e.stop()}},e,this)})),1e4);case 13:case"end":return e.stop()}},e,this,[[3,9]])}));return function(t){return e.apply(this,arguments)}}();c(0).catch(z.a);var i=function(){var e=Object(m.a)(p.a.mark(function e(){var t,n,a,o,c,s,l,u,d,m,h;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=60,e.prev=1,n=!0,a=!1,o=void 0,e.prev=5,c=K.valueSeq().toArray()[Symbol.iterator]();case 7:if(n=(s=c.next()).done){e.next=19;break}return l=s.value,e.next=11,Z(l.quoteToken,l.baseToken);case 11:u=e.sent,d=Object(B.a)(u,2),m=d[0],h=d[1],r.props.actions.updatePrices({price:m,percentChange:h,pair:l.code});case 16:n=!0,e.next=7;break;case 19:e.next=25;break;case 21:e.prev=21,e.t0=e.catch(5),a=!0,o=e.t0;case 25:e.prev=25,e.prev=26,n||null==c.return||c.return();case 28:if(e.prev=28,!a){e.next=31;break}throw o;case 31:return e.finish(28);case 32:return e.finish(25);case 33:e.next=39;break;case 35:e.prev=35,e.t1=e.catch(1),Object(z.a)(e.t1,{description:"Error in BackgroundTasks.callUpdatePrices"}),t=10;case 39:r.callUpdatePricesTimeout=setTimeout(i,1e3*t);case 40:case"end":return e.stop()}},e,this,[[1,35],[5,21,25,33],[26,,28,32]])}));return function(){return e.apply(this,arguments)}}();i().catch(z.a);var s=function(){var e=Object(m.a)(p.a.mark(function e(t){var n,a,o,c;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.props,a=n.sdk,o=n.traderOrders,c=t,!a.getAddress()){e.next=12;break}return e.prev=3,e.next=6,r.props.actions.checkOrderStatuses(a,o,c%120===1);case 6:c+=1,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),Object(z.a)(e.t0,{description:"Error in BackgroundTasks.callCheckOrderStatuses"});case 12:r.callCheckOrderStatusesTimeout=setTimeout(Object(m.a)(p.a.mark(function e(){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",s(c));case 1:case"end":return e.stop()}},e,this)})),5e3);case 13:case"end":return e.stop()}},e,this,[[3,9]])}));return function(t){return e.apply(this,arguments)}}();s(0).catch(z.a)},r.storeSDKData=Object(m.a)(p.a.mark(function e(){var t,n,a,o,c,i,s,l,u;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.props.sdk,e.next=3,Promise.all([t.fetchSupportedTokens(),t.fetchSupportedAtomicTokens(),t.fetchDarknodeFeePercent(),t.fetchWrappingFeePercent(),t.fetchMinEthTradeVolume(),t.fetchMarkets()]);case 3:n=e.sent,a=Object(B.a)(n,6),o=a[0],c=a[1],i=a[2],s=a[3],l=a[4],u=a[5],r.props.actions.storeSDKData({supportedTokens:Object(N.a)(o),supportedAtomicTokens:Object(N.a)(c),darknodeFeePercent:i,wrappingFeePercent:s,minEthTradeVolume:l,supportedMarkets:Object(N.a)(u)});case 12:case"end":return e.stop()}},e,this)})),r.state={},r}return Object(E.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=Object(m.a)(p.a.mark(function e(){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.storeSDKData().then(this.setupLoops).catch(this.setupLoops);case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.setupLoopsTimeout&&clearTimeout(this.setupLoopsTimeout),this.callGetLegacyBalancesTimeout&&clearTimeout(this.callGetLegacyBalancesTimeout),this.callHiddenOrdersTimeout&&clearTimeout(this.callHiddenOrdersTimeout),this.callUpdatePricesTimeout&&clearTimeout(this.callUpdatePricesTimeout),this.callLookForLogoutTimeout&&clearTimeout(this.callLookForLogoutTimeout),this.callConnectToAtomTimeout&&clearTimeout(this.callConnectToAtomTimeout),this.callUpdateAtomStatusTimeout&&clearTimeout(this.callUpdateAtomStatusTimeout),this.callGetAtomicBalancesTimeout&&clearTimeout(this.callGetAtomicBalancesTimeout),this.callCheckOrderStatusesTimeout&&clearTimeout(this.callCheckOrderStatusesTimeout),this.callCheckRenExExecutionTimeout&&clearTimeout(this.callCheckRenExExecutionTimeout),this.callUpdateBalancesHistoryTimeout&&clearTimeout(this.callUpdateBalancesHistoryTimeout)}},{key:"render",value:function(){return o.createElement(o.Fragment,null)}}]),t}(o.Component),qt=Object(s.b)(function(e){return{balanceHistory:e.balanceHistory.balanceHistory,pendingAlerts:e.alert.pendingAlerts,sdk:e.sdk.sdk,traderOrders:e.traderBook.traderOrders,wallet:e.trader.wallet}},function(e){return{actions:Object(j.b)({checkOrderStatuses:$e,getAtomicBalances:ze,getLegacyBalances:Ye,getHiddenOrders:Ht,lookForLogout:Rt,refreshAtomConnectionStatus:at,storeSDKData:Yt,updateBalancesHistory:We,updatePrices:Ft},e)}})(zt),Kt=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(b.a)(this,Object(v.a)(t).call(this,e))).componentDidCatch=function(e,t){n.setState({error:e,errorInfo:t}),Object(z.b)(e,t)},n.reportFeedback=function(){a.showReportDialog()},n.state={error:null,errorInfo:null},n}return Object(E.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return this.state.errorInfo?o.createElement("div",{className:this.props.popup?"popup":""},o.createElement("h2",null,"Something went wrong."),o.createElement("details",{style:{whiteSpace:"pre-wrap"}},this.state.error&&this.state.error.toString(),o.createElement("br",null),this.state.errorInfo.componentStack),this.props.popup?o.createElement("div",{className:"popup--buttons"},o.createElement("button",{onClick:this.reportFeedback},"Report feedback"),o.createElement("button",{onClick:this.props.onCancel},"Close")):null):this.props.children}}]),t}(o.Component),Gt=function(e,t){return o.createElement(Kt,{popup:t&&t.popup,onCancel:t&&t.onCancel},e)},Xt=function(e){function t(){return Object(h.a)(this,t),Object(b.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props,t=e.sdk,n=e.market,r=e.usableLegacyBalances,a=e.usableAtomicBalances,c=e.supportedTokens,i=e.supportedAtomicTokens,s=K.get(n,void 0),l=void 0!==s&&s.orderSettlement===U.OrderSettlement.RenExAtomic,u=J(c),d=$(i);return o.createElement("div",{className:"banner"},o.createElement("div",{className:"container"},o.createElement("div",{className:"banner--details"},l&&t.swapperd.isConnected()?o.createElement(o.Fragment,null,o.createElement("span",null,"Swapperd balances:"),o.createElement("ul",null,this.listBalances(d.toArray(),a))):o.createElement(o.Fragment,null,o.createElement("span",null,"Legacy balances:"),o.createElement("ul",null,this.listBalances(u.toArray(),r))))))}},{key:"listBalances",value:function(e,t){var r=[],a=!0,c=!1,i=void 0;try{for(var s,l=e[Symbol.iterator]();!(a=(s=l.next()).done);a=!0){var u=s.value,d=t.get(u,null),p=null!==d?d.toFixed():"-",m=G.get(u,X),h=m.symbol,f=m.icon,b=n(82)("./".concat(f));r.push(o.createElement("li",{key:u,className:"balance-banner--items"},o.createElement("a",null,o.createElement("img",{alt:"",role:"presentation",src:b})," ",p," ",h)))}}catch(v){c=!0,i=v}finally{try{a||null==l.return||l.return()}finally{if(c)throw i}}return r}}]),t}(o.Component),Zt=Object(s.b)(function(e){return{sdk:e.sdk.sdk,supportedTokens:e.sdk.supportedTokens,supportedAtomicTokens:e.sdk.supportedAtomicTokens,market:e.inputs.market,usableLegacyBalances:e.trader.usableLegacyBalances,usableAtomicBalances:e.trader.usableAtomicBalances}},function(e){return{actions:Object(j.b)({},e)}})(Xt),Jt=function(e){function t(){return Object(h.a)(this,t),Object(b.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props,t=e.title,n=e.description;return o.createElement("div",{className:"heading"},o.createElement("h1",{className:"heading--title"},t),n&&o.createElement("h2",{className:"heading--description"},"(",n,")"))}}]),t}(o.Component),$t=function(e){function t(e,n){var r;return Object(h.a)(this,t),(r=Object(b.a)(this,Object(v.a)(t).call(this,e,n))).highlightTimeout=void 0,r.datesRerenderTimeout=void 0,r.state={highlightLatest:!1,receivedBalances:!1},r}return Object(E.a)(t,e),Object(f.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.balanceHistory.size<e.balanceHistory.size&&(this.state.receivedBalances?(this.setState({highlightLatest:!0}),this.highlightTimeout&&clearTimeout(this.highlightTimeout),this.highlightTimeout=setTimeout(function(){t.setState({highlightLatest:!1})},3e3)):this.setState({receivedBalances:!0}))}},{key:"componentWillUnmount",value:function(){this.highlightTimeout&&clearTimeout(this.highlightTimeout),this.datesRerenderTimeout&&clearTimeout(this.datesRerenderTimeout)}},{key:"render",value:function(){var e=this,t=this.props.balanceHistory,n=null;if(t.size>0){var a=t.valueSeq().toArray().map(function(e){return V(e.time)}).reduce(function(e,t){return Math.min(e,t)},r.Day);this.datesRerenderTimeout&&clearTimeout(this.datesRerenderTimeout),this.datesRerenderTimeout=setTimeout(function(){e.forceUpdate()},a/2),n=this.generateRows()}return o.createElement("div",{className:"section history"},o.createElement("div",{className:"container"},o.createElement(Jt,{title:"Recent legacy deposits and withdrawals"}),o.createElement("div",{className:"table--wrapper"},o.createElement("table",null,o.createElement("thead",null,o.createElement("tr",null,o.createElement("th",null,"Transaction Hash"),o.createElement("th",null,"Date"),o.createElement("th",null,"Action"),o.createElement("th",null,"Amount"))),o.createElement("tbody",null,null!==n?n:o.createElement("tr",null,o.createElement("td",{colSpan:4},"No transactions")))))))}},{key:"generateRows",value:function(){var e=this.props.balanceHistory,t=this.state.highlightLatest,n=!1,r=e.valueSeq().toArray().reverse().map(function(e,r){n=!0;var a="".concat(q.b.etherscan,"/tx/").concat(e.txHash),c=e.amount,i=P()(1e3*e.time).format("MMMM Do YYYY, HH:mm:ss"),s=e.action.charAt(0).toUpperCase()+e.action.slice(1);return o.createElement("tr",{key:r,className:"".concat(0===r&&t?"recent":""," balanceAction--").concat(e.status)},o.createElement("td",{className:"monospace"},e.status===U.TransactionStatus.Pending?o.createElement(tt.a,null):"",o.createElement("a",{href:a,rel:"noopener noreferrer",target:"_blank"},e.txHash),e.status===U.TransactionStatus.Failed?o.createElement("span",{className:"red"}," (failed)"):"",e.status===U.TransactionStatus.Replaced?o.createElement("span",{className:"red"}," (replaced)"):""),o.createElement("td",{title:i},o.createElement("span",null,_(e.time,{message:"Just now",suffix:"ago",countDown:!1}))),o.createElement("td",null,s),o.createElement("td",null,c.toFixed()," ",G.get(e.token,X).symbol))});return n?r:null}}]),t}(o.Component),Qt=Object(s.b)(function(e){return{balanceHistory:e.balanceHistory.balanceHistory,sdk:e.sdk.sdk,updateIndex:e.balanceHistory.updateIndex}})($t),en=n(974),tn=function(){var e=[0,0,0,0],t=function(){var t=e[0]^e[0]<<11;return e[0]=e[1],e[1]=e[2],e[2]=e[3],e[3]=e[3]^e[3]>>19^t^t>>8,(e[3]>>>0)/(1<<31>>>0)},n=function(){var e=Math.floor(360*t()),n="".concat(60*t()+40,"%"),r="".concat(25*(t()+t()+t()+t()),"%");return"hsl(".concat(e,",").concat(n,",").concat(r,")")},r=function(t){var r={};return r.size=t.size||8,r.scale=t.scale||4,r.seed=t.seed||Math.floor(Math.random()*Math.pow(10,16)).toString(16),function(t){for(var n=0;n<e.length;n++)e[n]=0;for(var r=0;r<t.length;r++)e[r%4]=(e[r%4]<<5)-e[r%4]+t.charCodeAt(r)}(r.seed),r.color=t.color||n(),r.bgColor=t.bgColor||n(),r.spotColor=t.spotColor||n(),r},a=function(e,n){var a=r(e||{}),o=function(e){for(var n=e,r=e,a=Math.ceil(n/2),o=n-a,c=[],i=0;i<r;i++){for(var s=[],l=0;l<a;l++)s[l]=Math.floor(2.3*t());var u=s.slice(0,o);u.reverse(),s=s.concat(u);var d=!0,p=!1,m=void 0;try{for(var h,f=s[Symbol.iterator]();!(d=(h=f.next()).done);d=!0){var b=h.value;c.push(b)}}catch(v){p=!0,m=v}finally{try{d||null==f.return||f.return()}finally{if(p)throw m}}}return c}(a.size),c=Math.sqrt(o.length);n.width=n.height=a.size*a.scale;var i=n.getContext("2d");if(!i)return n;i.fillStyle=a.bgColor,i.fillRect(0,0,n.width,n.height),i.fillStyle=a.color;for(var s=0;s<o.length;s++)if(o[s]){var l=Math.floor(s/c),u=s%c;i.fillStyle=1===o[s]?a.color:a.spotColor,i.fillRect(u*a.scale,l*a.scale,a.scale,a.scale)}return n};return{create:function(e){var t=r(e||{}),n=document.createElement("canvas");return a(t,n),n},render:a}},nn=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(b.a)(this,Object(v.a)(t).call(this,e))).canvas=void 0,n.blocky=tn(),n.getOpts=function(e){return{seed:e.toLowerCase(),size:8,scale:10}},n.renderIcon=function(e){e?(n.setState({loading:!1}),n.blocky.create(n.getOpts(e)),n.canvas?n.blocky.render(n.getOpts(e),n.canvas):console.error("No canvas provided to Block component.")):n.setState({loading:!0})},n.setCanvas=function(e){return n.canvas=e},n.state={loading:!0},n.canvas=null,n}return Object(E.a)(t,e),Object(f.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.renderIcon(e.address)}},{key:"componentDidMount",value:function(){this.renderIcon(this.props.address)}},{key:"render",value:function(){var e=this.props.address,t=this.state.loading;return o.createElement("div",{className:"blocky--outer"},o.createElement("div",{"data-tip":e||"..."},t?o.createElement("i",{className:"fa fa-spin fa-spinner blocky__loading"}):o.createElement("i",null),o.createElement("canvas",{className:"blocky",ref:this.setCanvas})))}}]),t}(o.Component),rn=function(e){function t(e,n){var r;return Object(h.a)(this,t),(r=Object(b.a)(this,Object(v.a)(t).call(this,e,n))).showDropdown=function(){r.setState({dropdownVisible:!0,copied:!1})},r.hideDropdown=function(){r.setState({dropdownVisible:!1,copied:!1})},r.copyToClipboard=function(e){var t=e.currentTarget.childNodes[0].getAttribute("data-addr");if(t){var n=document.createElement("input");document.body.appendChild(n),n.setAttribute("value",t),n.select(),document.execCommand("copy"),document.body.removeChild(n)}r.setState({copied:!0})},r.handleLogOut=Object(m.a)(p.a.mark(function e(){var t,n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.props.sdk,e.prev=1,e.next=4,r.props.actions.logout(t,{reload:!0});case 4:e.next=11;break;case 6:e.prev=6,e.t0=e.catch(1),n="Something went wrong while logging out.",r.props.actions.setAlert({alert:new pe({alertType:ce.Error,message:n})}),Object(z.c)(e.t0,{description:n,shownToUser:"As alert"});case 11:case"end":return e.stop()}},e,this,[[1,6]])})),r.state={copied:!1,dropdownVisible:!1},r}return Object(E.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props,t=e.address,n=e.withMenu,r=this.state,a=r.dropdownVisible,c=r.copied,i=(this.props.location?this.props.location.pathname:"").split("/")[1],s=null!=t;return o.createElement("div",{className:"header"},o.createElement("div",{className:"container"},o.createElement(en.a,{to:s?"/exchange":"/"},o.createElement("div",{className:"header--logo"})),n?o.createElement("ul",{className:"header--menu"},o.createElement("li",{className:"exchange"===i?"active":""},o.createElement(en.a,{to:"/exchange"},o.createElement("span",null,"Exchange"))),o.createElement("li",{className:"orders"===i?"active":""},o.createElement(en.a,{to:"/orders"},o.createElement("span",null,"Orders"))),o.createElement("li",{className:"balances"===i?"active":""},o.createElement(en.a,{to:"/balances"},o.createElement("span",null,"Balances"))),o.createElement("li",{className:"header--logout",role:"button",onClick:this.handleLogOut},o.createElement(en.a,{to:""},o.createElement("span",null,"Logout"))),t&&o.createElement("li",{className:"header--account",onMouseEnter:this.showDropdown,onMouseLeave:this.hideDropdown},o.createElement(nn,{address:t}),a?o.createElement("ul",{className:"header--dropdown"},o.createElement("li",{role:"button",onClick:this.copyToClipboard},o.createElement("span",{"data-addr":t},c?o.createElement("span",null,"Copied"):o.createElement("span",null,t.substring(0,8),"...",t.slice(-5)))),o.createElement("li",{role:"button",onClick:this.handleLogOut},"Logout")):null)):null))}}]),t}(o.Component),an=Object(w.a)(Object(s.b)(function(e){return{address:e.trader.address,sdk:e.sdk.sdk}},function(e){return{actions:Object(j.b)({logout:Dt,setAlert:x},e)}})(rn)),on=function(e){function t(){return Object(h.a)(this,t),Object(b.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return o.createElement("div",{className:"market"},o.createElement("div",{className:"container"},o.createElement("ul",{className:"market--items"},this.listPairs())))}},{key:"listPairs",value:function(){var e=this,t=this.props.marketPrices,n=0;return K.map(function(r){n+=1;var a=r.code,c=t.get(a,void 0);if(void 0===c||a===F.WBTC_BTC)return o.createElement("div",{key:n});var i=c?"".concat(c.percentChange.toFixed(2),"%"):"",s=c?c.price:"",l=G.get(r.quoteToken,void 0),u=G.get(r.baseToken,void 0);return l&&u?o.createElement("li",{key:n,title:s.toString()},o.createElement(en.a,{to:"/exchange",onClick:e.updateMarket.bind(e,a)},o.createElement("span",null,"".concat(u.symbol,"/").concat(l.symbol),":")),o.createElement("span",{className:"".concat(c.percentChange<0?"negative":"positive")},i)):o.createElement("div",{key:n})}).valueSeq().toArray()}},{key:"updateMarket",value:function(e){e!==this.props.market&&this.props.actions.setMarket({market:e})}}]),t}(o.Component),cn=Object(s.b)(function(e){return{market:e.inputs.market,marketPrices:e.marketPrices.marketPrices}},function(e){return{actions:Object(j.b)({setMarket:qe},e)}})(on),sn=function(e){function t(){return Object(h.a)(this,t),Object(b.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props.atomConnectionStatus===U.AtomicConnectionStatus.ConnectedUnlocked;return o.createElement("div",{className:"section view"},o.createElement("div",{className:"container"},o.createElement(Jt,{title:"Balances held by Swapperd"}),e?o.createElement("div",{className:"view--table table--wrapper"},o.createElement("table",null,o.createElement("thead",null,o.createElement("tr",null,o.createElement("th",null,"Token"),o.createElement("th",null,"Address"),o.createElement("th",null,"Total Balance"),o.createElement("th",null,"Usable Balance",o.createElement(Et,null,"The amount you have deposited, excluding balances locked in open orders.")))),o.createElement("tbody",null,this.generateRows()))):o.createElement(it,null)))}},{key:"generateRows",value:function(){var e=[],t=this.props,r=t.atomicAddresses,a=t.atomicBalances,c=t.usableAtomicBalances,i=t.supportedAtomicTokens;return $(i).forEach(function(t){var i=G.get(t,X),s=i.name,l=i.symbol,u=i.icon,d=r.get(t,void 0)||"-",p=a.get(t,void 0),m=void 0!==p&&null!==p?"".concat(p.toFixed()," ").concat(l):"-",h=c.get(t,void 0),f=void 0!==h&&null!==h?"".concat(h.toFixed()," ").concat(l):"-",b=n(82)("./".concat(u));e.push(o.createElement("tr",{key:t},o.createElement("td",null,o.createElement("img",{alt:"",role:"presentation",src:b}),o.createElement("span",null,"".concat(s," "))),o.createElement("td",{className:"monospace"},d),o.createElement("td",null,m,null===p&&o.createElement(Et,{level:ie.Warning},"Failed to retrieve total ",l," balance.")),o.createElement("td",null,f,null===h&&o.createElement(Et,{level:ie.Warning},"Failed to retrieve usable ",l," balance."))))}),e}}]),t}(o.Component),ln=Object(s.b)(function(e){return{atomicAddresses:e.trader.atomicAddresses,atomicBalances:e.trader.atomicBalances,usableAtomicBalances:e.trader.usableAtomicBalances,atomConnectionStatus:e.trader.atomConnectionStatus,supportedAtomicTokens:e.sdk.supportedAtomicTokens}})(sn),un=function(e){function t(){return Object(h.a)(this,t),Object(b.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return o.createElement("div",{className:"section view"},o.createElement("div",{className:"container"},o.createElement(Jt,{title:"Your legacy balances"}),o.createElement(Ot,null)))}}]),t}(o.Component),dn=Object(s.b)(function(e){return{}})(un),pn=function(){return o.createElement("div",{className:"balances"},Gt(o.createElement(cn,null)),Gt(o.createElement(an,{withMenu:!0})),Gt(o.createElement(Zt,null)),o.createElement("div",{className:"content"},Gt(o.createElement(ln,null)),Gt(o.createElement(dn,null)),Gt(o.createElement(Qt,null))))},mn=function(e){function t(e,n){var r;return Object(h.a)(this,t),(r=Object(b.a)(this,Object(v.a)(t).call(this,e,n))).state={},r}return Object(E.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props.recent,t=this.props.traderOrders,n="Your ".concat(e?"latest ":"","submitted orders");return o.createElement("div",{className:"section trades"},o.createElement("div",{className:"container"},o.createElement(Jt,{title:n}),o.createElement(yt,{amountToShow:e?5:void 0}),e&&t&&t.size-5>0&&o.createElement("p",null,o.createElement(en.a,{to:"/orders"},"View ",t.size-5," more"))))}}]),t}(o.Component),hn=Object(s.b)(function(e){return{traderOrders:e.traderBook.traderOrders}},function(e){return{actions:Object(j.b)({},e)}})(mn),fn=function(e){function t(e,n){var r;return Object(h.a)(this,t),(r=Object(b.a)(this,Object(v.a)(t).call(this,e,n))).state={relevantRows:0},r}return Object(E.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props.traderOrders.valueSeq().toArray().filter(function(e){return!!e.matchDetails}),t=!0===this.props.recent,n=null;e.length>0&&(n=this.generateRows(e));var r="Your ".concat(t?"latest ":"","executed orders");return o.createElement("div",{className:"section trades"},o.createElement("div",{className:"container"},o.createElement(Jt,{title:r}),o.createElement("div",{className:"trades--table table--wrapper"},o.createElement("table",null,o.createElement("thead",null,o.createElement("tr",null,o.createElement("th",null,"Order ID"),o.createElement("th",null,"Match ID"),o.createElement("th",null,"Spent Amount"),o.createElement("th",null,"Receive Amount"))),o.createElement("tbody",null,null!==n?t?n.slice(0,5):n:o.createElement("tr",null,o.createElement("td",{colSpan:4},"No executed orders"))))),t&&null!==n&&n.length-5>0?o.createElement("p",null,o.createElement(en.a,{to:"/orders"},"View ",n.length-5," more")):null))}},{key:"generateRows",value:function(e){return e.reverse().map(function(e,t){var n=e.matchDetails;if(void 0===n)return o.createElement(o.Fragment,null);var r=G.get(n.receivedToken,X),a=G.get(n.spentToken,X),c=n.receivedVolume,i=n.spentVolume.plus(n.fee);return o.createElement("tr",{key:t},o.createElement("td",null,o.createElement("span",{className:"monospace"},n.orderID)),o.createElement("td",{className:"match"},o.createElement("span",{className:"monospace"},n.matchedID)),o.createElement("td",{className:"center volume"},o.createElement("span",null,"".concat(i," ").concat(a.symbol))),o.createElement("td",{className:"center volume"},o.createElement("span",null,"".concat(c," ").concat(r.symbol))))})}}]),t}(o.Component),bn=Object(s.b)(function(e){return{traderOrders:e.traderBook.traderOrders,sdk:e.sdk.sdk}})(fn),vn=n(40),En=(de={},Object(vn.a)(de,U.OrderStatus.NOT_SUBMITTED,"-"),Object(vn.a)(de,U.OrderStatus.OPEN,"Open"),Object(vn.a)(de,U.OrderStatus.CONFIRMED,"Matched"),Object(vn.a)(de,U.OrderStatus.CANCELED,"Canceled"),Object(vn.a)(de,U.OrderStatus.SETTLED,"Settled"),de),gn=function(e){function t(e,n){return Object(h.a)(this,t),Object(b.a)(this,Object(v.a)(t).call(this,e,n))}return Object(E.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props.hiddenOrders;return o.createElement("div",{className:"section orderbook"},o.createElement("div",{className:"container"},o.createElement(Jt,{title:"Hidden orderbook",description:"Last ".concat(10," orders")}),e?o.createElement("div",{className:"table--wrapper"},o.createElement("table",null,o.createElement("thead",null,o.createElement("tr",null,o.createElement("th",null,"Order ID"),o.createElement("th",{className:"center"},"Status"))),o.createElement("tbody",null,e.size>0?e.reverse().toArray().map(function(e){return o.createElement("tr",{key:e.id},o.createElement("td",{className:"truncate"},o.createElement("span",{className:"monospace"},e.id)),o.createElement("td",{className:"center"},En[e.status]))}):o.createElement("tr",null)))):o.createElement(tt.a,null)))}}]),t}(o.Component),yn=Object(s.b)(function(e){return{hiddenOrders:e.hiddenBook.hiddenOrders,sdk:e.sdk.sdk}})(gn),wn=n(44),On=n(73),kn=function(e,t){var n=function(e,t){var n=void 0===e||""===e?"0":e,r=G.get(t,X),a=new M.a(10).pow(r.digits);return new we.a(new M.a(n).times(a).integerValue(M.a.ROUND_FLOOR).toFixed())}(e.toFixed(),t);return new M.a(function(e,t){var n=void 0===e?new we.a(0):e,r=G.get(t,X),a=new M.a(n.toString()),o=new M.a(10).pow(r.digits);return a=a.div(o)}(n,t))},Tn=n(376),jn=function(e){function t(){return Object(h.a)(this,t),Object(b.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props,t=e.form,n=t.errors,r=t.dirty,a=e.title,o=e.ticker,i=e.disabled,s=e.hint,l=e.handleChange,u=e.handleBlur,d=e.notice,p=this.props.field,m=(p.onBlur,p.onChange,Object(Tn.a)(p,["onBlur","onChange"]));return c.a.createElement("div",{className:"order--input-wrapper"},c.a.createElement("label",null,c.a.createElement("div",{className:"order--title"},c.a.createElement("span",null,a),s&&c.a.createElement(Et,null,s)),c.a.createElement("span",{className:"order--input-item".concat(i?" disabled":"")},c.a.createElement("input",Object.assign({},m,{type:"number",step:this.calculateStep(),disabled:i,placeholder:"0",min:0,onChange:l,onBlur:u})),c.a.createElement("span",null,o))),!!n[m.name]&&r&&c.a.createElement("p",{className:"order--warning"},n[m.name]),!!d&&!n[m.name]&&c.a.createElement("p",{className:"order--message"},d))}},{key:"calculateStep",value:function(){var e=this.props,t=e.stepFunction,n=e.field;return t?t(new M.a(n.value||"0")):""}}]),t}(c.a.Component),Sn=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(b.a)(this,Object(v.a)(t).call(this,e))).preRender=function(e){var t=e.values,r=e.settlementType,a=e.market,o=e.side,c=K.get(a,void 0);if(c){var i=G.get(c.quoteToken,void 0),s=G.get(c.baseToken,void 0);if(i&&s){var l,u;if(r===U.OrderSettlement.RenExAtomic){l=o===U.OrderSide.BUY?i:s;var d=new M.a(o===U.OrderSide.BUY?t.priorityVolume:t.volume);u=d.gt(new M.a(0))?"You will spend ".concat(d.plus(n.feeAmount()).toFixed()," ").concat(l.symbol," after fees."):""}else{l=o===U.OrderSide.BUY?s:i;var p=new M.a(o===U.OrderSide.BUY?t.volume:t.priorityVolume);u=p.gt(new M.a(0))?"You will receive ".concat(p.minus(n.feeAmount()).toFixed()," ").concat(l.symbol," after fees."):""}n.setState({priorityTokenDetails:i,nonPriorityTokenDetails:s,notice:u,feeToken:l})}}},n.pricepointRender=function(e){var t=n.props,r=t.market,a=t.initialMarketPrice,o=K.get(r,void 0);if(!o)return c.a.createElement(c.a.Fragment,null);var i=G.get(o.quoteToken,void 0);if(!i)return c.a.createElement(c.a.Fragment,null);var s=i.symbol;return c.a.createElement(jn,Object.assign({},e,{title:c.a.createElement(c.a.Fragment,null,"Price (",c.a.createElement("span",{role:"button",className:"order--option",onClick:function(){n.setAndUpdateValues(e.field.name,a)}},"Market"),")"),disabled:void 0!==o.fixedPrice,ticker:s,stepFunction:W,handleChange:n.handleChange,handleBlur:n.handleBlur}))},n.volumeRender=function(e){var t=n.props,r=t.side,a=t.settlementType,o=n.state,i=o.nonPriorityTokenDetails,s=o.notice;return i?c.a.createElement(jn,Object.assign({},e,{title:c.a.createElement(c.a.Fragment,null,r===U.OrderSide.BUY?"Receive":"Spend"," (",c.a.createElement("span",{role:"button",className:"order--option",onClick:n.fillVolume},"Max"),")"),ticker:i.symbol,stepFunction:Y,handleChange:n.handleChange,handleBlur:n.handleBlur,notice:a===U.OrderSettlement.RenExAtomic?r===U.OrderSide.SELL&&s:r===U.OrderSide.BUY&&s})):c.a.createElement(c.a.Fragment,null)},n.renderMinVolume=function(e){var t=n.props.allOrNothing,r=n.state.nonPriorityTokenDetails;return r?c.a.createElement(jn,Object.assign({},e,{title:"Minimum Fill Amount",ticker:r.symbol,hint:"The minimum volume you are willing to be matched with. This does not affect price but higher minimum volumes reduce the chances of order match.",disabled:t,stepFunction:Y,handleChange:n.handleChange,handleBlur:n.handleBlur})):c.a.createElement(c.a.Fragment,null)},n.renderPriorityVolume=function(e){var t=n.props,r=t.side,a=t.settlementType,o=n.state,i=o.priorityTokenDetails,s=o.notice;return i?c.a.createElement(jn,Object.assign({},e,{title:r===U.OrderSide.BUY?"Spend":"Receive",ticker:i.symbol,disabled:!0,stepFunction:Y,notice:a===U.OrderSettlement.RenExAtomic?r===U.OrderSide.BUY&&s:r===U.OrderSide.SELL&&s})):c.a.createElement(c.a.Fragment,null)},n.feeAmount=function(){var e=n.props,t=e.values,r=e.side,a=e.feePercent,o=e.settlementType,c=new M.a(t.volume||"0"),i=new M.a(t.priorityVolume||"0");return o===U.OrderSettlement.RenExAtomic?r===U.OrderSide.BUY?i.times(a):c.times(a):r===U.OrderSide.BUY?c.times(a):i.times(a)},n.fillVolume=function(){var e=n.props,t=e.market,r=e.values,a=e.side,o=e.settlementType===U.OrderSettlement.RenEx?n.props.usableLegacyBalances:n.props.usableAtomicBalances,c=r.pricepoint,i=K.get(t,void 0);if(i){var s=i.quoteToken,l=i.baseToken,u=new M.a(0);if(a===U.OrderSide.BUY){var d=new M.a(c||"0");if(!d.isZero())u=(o.get(s)||new M.a(0)).div(d)}else u=o.get(l)||new M.a(0);n.setAndUpdateValues("volume",u.toFixed(),!0)}},n.handleChange=function(e){var t=e.target,r=t.name,a=t.value;n.setAndUpdateValues(r,a)},n.handleBlur=function(e){var t=e.target,r=t.name,a=t.value;n.setAndUpdateValues(r,a,!0)},n.state={priorityTokenDetails:void 0,nonPriorityTokenDetails:void 0,feeToken:void 0,notice:void 0},n}return Object(E.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.values;(0,e.setValues)(this.calculateNewState(t)),this.preRender(this.props)}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.values,n=e.side;this.props.actions.setOrder({orderInputs:{side:n,pricepoint:t.pricepoint,volume:t.volume,minVolume:t.minVolume}})}},{key:"componentWillReceiveProps",value:function(){var e=Object(m.a)(p.a.mark(function e(t){var n,r,a,o,c,i,s,l,u,d,m,h,f;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.props,r=n.market,a=n.side,o=n.allOrNothing,c=n.initialMarketPrice,i=n.validateForm,s=n.values,l=r!==t.market,u=c!==t.initialMarketPrice,d=new M.a(s.pricepoint||"0"),(!s.minVolume&&!t.values.minVolume||l||u&&d.lte(new M.a(0)))&&(t.values.pricepoint=t.initialMarketPrice,m=K.get(t.market,void 0),h=new M.a(t.initialMarketPrice),m&&!h.isZero()&&(f=t.calculateAbsoluteMinTradeVolume(m.quoteToken,m.baseToken,h),t.values.minVolume=new M.a(f).toFixed())),!o&&t.allOrNothing&&(t.values.minVolume=t.values.volume),!(a!==t.side)&&!l&&o===t.allOrNothing){e.next=12;break}return e.next=12,i();case 12:this.preRender(t);case 13:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.side,n=e.feePercent,r=e.isSubmitting,a=e.isValid,o=this.state,i=o.feeToken,s=o.nonPriorityTokenDetails;return i&&s?c.a.createElement(On.b,null,c.a.createElement("div",{className:"order--inputs"},c.a.createElement(On.a,{name:"pricepoint",render:this.pricepointRender}),c.a.createElement(On.a,{name:"volume",render:this.volumeRender}),c.a.createElement(On.a,{name:"minVolume",render:this.renderMinVolume}),c.a.createElement(On.a,{name:"priorityVolume",render:this.renderPriorityVolume})),c.a.createElement("div",null,c.a.createElement("div",null,c.a.createElement("span",null,"Fee: ",this.feeAmount().toFixed()," ",i.symbol),c.a.createElement(Et,null,"Fees are set to ",n.times(100).toFixed(),"% of the order volume."))),c.a.createElement("div",{className:"order--footer"},c.a.createElement("button",{className:"order--button ".concat(r?"submitting":""),type:"submit",disabled:!a||r},c.a.createElement("span",null,r?c.a.createElement(tt.a,null):c.a.createElement(c.a.Fragment,null,t===U.OrderSide.BUY?"Buy":"Sell"," ",s.symbol))))):c.a.createElement(c.a.Fragment,null)}},{key:"calculateNewState",value:function(e,t,n){var r=Object(wn.a)({},e);if(t){var a=void 0===n?e[t]:n;-1!==a.toLowerCase().indexOf("e")&&(a=new M.a(a).toFixed()),r=Object(wn.a)({},r,Object(vn.a)({},t,a))}var o=r,c=o.pricepoint,i=o.volume;this.props.allOrNothing&&(r.minVolume=r.volume);var s=new M.a(c||"0"),l=new M.a(i||"0").times(s);return r.priorityVolume=l.toFixed(),r}},{key:"coerceValues",value:function(e,t){var n=this.props,r=n.sdk,a=n.market,o=n.initialMarketPrice,c=n.calculateAbsoluteMinTradeVolume,i=n.side,s=r.utils,l=s.normalizePrice,u=s.normalizeVolume,d=K.get(a,void 0);if(!d)return e;var p=new M.a(l(new M.a(e.pricepoint||"0"),i===U.OrderSide.SELL)),m=new M.a(u(kn(new M.a(e.volume||"0"),d.baseToken))),h=new M.a(u(kn(new M.a(e.minVolume||"0"),d.baseToken))),f=c(d.quoteToken,d.baseToken,p),b=Object(wn.a)({},e);switch(t){case"pricepoint":p.lte(new M.a(0))?b.pricepoint=o:b.pricepoint=p.toFixed();break;case"volume":b.volume=m.toFixed(),m.lt(h)&&(b.minVolume=M.a.max(m,f).toFixed());break;case"minVolume":b.minVolume=h.toFixed(),h.lt(f)&&(b.minVolume=f.toFixed()),h.gt(m)&&(b.volume=b.minVolume);break;default:var v="Unexpected value name ".concat(t," in coerceValues");Object(z.c)(new Error(v),{description:v,shownToUser:"No"})}return this.calculateNewState(b,t)}},{key:"setAndUpdateValues",value:function(e,t,n){var r=this.props,a=r.setValues,o=r.values,c=this.calculateNewState(o,e,t);n&&(c=this.coerceValues(c,e)),a(c)}}]),t}(c.a.Component),xn=Object(s.b)(function(e){return{sdk:e.sdk.sdk,feePercent:e.sdk.darknodeFeePercent,usableLegacyBalances:e.trader.usableLegacyBalances,usableAtomicBalances:e.trader.usableAtomicBalances}},function(e){return{actions:Object(j.b)({setOrder:Ke},e)}})(Sn),Cn=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(b.a)(this,Object(v.a)(t).call(this,e))).handleSubmit=function(){var e=Object(m.a)(p.a.mark(function e(t,r){var a,o,c,i,s,l,u,d,m,h,f,b,v,E,g;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.setSubmitting,o=r.resetForm,c=n.props,i=c.market,s=c.sdk,l=n.state,u=l.side,d=l.immediateOrCancel,m=l.fillOrKill,h=t.pricepoint,f=t.volume,b=t.minVolume,v=d||m?U.OrderType.LIMIT_IOC:U.OrderType.LIMIT,E=function(){a(!1),o({pricepoint:h,volume:"0",minVolume:"0",priorityVolume:"0"})},g=function(){a(!1)},e.next=9,n.props.actions.openOrder(s,i,u,h||"0",f||"0",b||"0",v,E,g);case 9:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),n.validate=function(e){var t=n.props,r=t.minEthereumTradeVolume,a=t.market,o=t.settlementType===U.OrderSettlement.RenEx?n.props.usableLegacyBalances:n.props.usableAtomicBalances,c=n.state,i=c.side,s=c.allOrNothing,l={},u=K.get(a,void 0);if(!u)return l.volume="Unknown market pair.",l;var d=i===U.OrderSide.BUY?u.quoteToken:u.baseToken,p=i===U.OrderSide.BUY?"priorityVolume":"volume",m=o.get(d)||new M.a(0),h=new M.a(e[p]),f=G.get(d,X),b=new M.a(e.pricepoint||"0"),v=new M.a(e.volume||"0"),E=new M.a(e.minVolume||"0"),g=new M.a(e.priorityVolume||"0");if(m.lt(h)&&(l[p]="Insufficient ".concat(f.symbol," balance.")),u.quoteToken===U.Token.ETH&&g.lt(r)&&(l.priorityVolume="Minimum order size is ".concat(r.toFixed()," ETH.")),!b.isZero()){var y=n.calculateAbsoluteMinTradeVolume(u.quoteToken,u.baseToken,b),w=G.get(u.baseToken,X);if(E.lt(y)){var O=s?"Volume":"Minimum volume";l[s?"volume":"minVolume"]="".concat(O," must be at least ").concat(y.toFixed()," ").concat(w.symbol,".")}}return v.lt(E)&&(l.volume="Volume cannot be less than minimum volume."),l},n.handleMoreOptions=function(e){var t=e.target,r=t.name,a=t.checked;n.setState(function(e){return Object(wn.a)({},e,Object(vn.a)({},r,a))})},n.calculateAbsoluteMinTradeVolume=function(e,t,r){var a=n.props,o=a.sdk,c=a.minEthereumTradeVolume;switch(t){case U.Token.ETH:return c;case U.Token.WBTC:return new M.a(2e-4);default:var i=new M.a(o.utils.normalizeVolume(c.dividedBy(r),!0));return e===U.Token.BTC&&(i=i.multipliedBy(.01)),i}},n.state={showMoreOptions:!0,allOrNothing:!1,immediateOrCancel:!1,fillOrKill:!1,side:U.OrderSide.BUY},n}return Object(E.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.orderInputs;e.side!==this.state.side&&this.setState({side:e.side})}},{key:"render",value:function(){var e=this,t=this.state,n=t.fillOrKill,r=t.allOrNothing,a=t.immediateOrCancel,o=t.showMoreOptions,i=this.props,s=i.sdk,l=i.orderInputs,u=i.market,d=i.marketPrice,p=i.settlementType,m=K.get(u,void 0);if(!m)return c.a.createElement(c.a.Fragment,null);var h=G.get(m.baseToken,X),f=this.state.side,b=d?new M.a(s.utils.normalizePrice(d)).toFixed():"0";return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"order--wrapper order--wrapper--tabbed"},c.a.createElement("ul",{className:"order--tabs"},c.a.createElement("li",{className:f===U.OrderSide.BUY?"active":"",role:"tab",onClick:function(){e.setState({side:U.OrderSide.BUY})}},c.a.createElement("span",null,"Buy ",h.symbol)),c.a.createElement("li",{className:f===U.OrderSide.SELL?"active":"",role:"tab",onClick:function(){e.setState({side:U.OrderSide.SELL})}},c.a.createElement("span",null,"Sell ",h.symbol))),c.a.createElement(On.c,{initialValues:{volume:l.volume||"",minVolume:l.minVolume||"",pricepoint:l.pricepoint||b,priorityVolume:""},validate:this.validate,onSubmit:this.handleSubmit,render:function(t){return c.a.createElement(xn,Object.assign({},t,{market:u,side:f,allOrNothing:r||n,initialMarketPrice:b,settlementType:p,calculateAbsoluteMinTradeVolume:e.calculateAbsoluteMinTradeVolume}))}})),c.a.createElement("div",{className:"order--options ".concat(o?"":"hidden")},c.a.createElement("label",null,c.a.createElement("input",{name:"allOrNothing",type:"checkbox",disabled:n,checked:r||n,onChange:this.handleMoreOptions}),"All or Nothing ",c.a.createElement(Et,null,"Execute either the entire order or not at all.")),c.a.createElement("label",null,c.a.createElement("input",{name:"immediateOrCancel",type:"checkbox",disabled:n,checked:a||n,onChange:this.handleMoreOptions}),"Immediate or Cancel ",c.a.createElement(Et,null,"If the order cannot be matched against the current orderbook, cancel the order.")),c.a.createElement("label",null,c.a.createElement("input",{name:"fillOrKill",type:"checkbox",disabled:r&&a,checked:n||r&&a,onChange:this.handleMoreOptions}),"Fill or Kill ",c.a.createElement(Et,null,"If the entire order cannot be executed against the current orderbook, cancel the order."))))}}]),t}(c.a.Component),An=Object(s.b)(function(e){return{sdk:e.sdk.sdk,orderInputs:e.inputs.orderInputs,minEthereumTradeVolume:e.sdk.minEthTradeVolume,usableLegacyBalances:e.trader.usableLegacyBalances,usableAtomicBalances:e.trader.usableAtomicBalances}},function(e){return{actions:Object(j.b)({openOrder:bt},e)}})(Cn),Nn=n(112),Un=n(26),Ln=function(e){var t=e.children,n=e.cx,r=e.getStyles,a=e.className,c=e.isDisabled,i=e.isFocused,s=e.innerRef,l=e.innerProps,u=e.menuIsOpen;return o.createElement("div",Object.assign({ref:s,className:"".concat(n(Object(Un.a)(r("control",e)),{control:!0,"control--is-disabled":c,"control--is-focused":i,"control--menu-is-open":u},a)||""," Select-control")},l),t)},Bn=function(e){var t=e.className,r=e.cx,a=e.getStyles,c=e.isDisabled,i=e.innerProps,s=e.children,l=e.data,u=G.get(l.value,X).icon,d=n(82)("./".concat(u));return o.createElement("div",Object.assign({className:"".concat(r(Object(Un.a)(a("singleValue",e)),{"single-value":!0,"single-value--is-disabled":c},t)," Select-value")},i),o.createElement("img",{alt:"",role:"presentation",src:d}),s)},Dn=function(e){var t=e.children,r=e.className,a=e.cx,c=e.getStyles,i=e.isDisabled,s=e.isFocused,l=e.isSelected,u=e.innerRef,d=e.innerProps,p=e.data,m=G.get(p.value,X).icon,h=n(82)("./".concat(m));return o.createElement("div",Object.assign({ref:u,className:"".concat(a(Object(Un.a)(c("option",e)),{option:!0,"option--is-disabled":i,"option--is-focused":s,"option--is-selected":l},r)||""," Select--option")},d),o.createElement("img",{role:"presentation",alt:"",src:h}),t)},Pn=function(e){function t(e,n){var r;Object(h.a)(this,t),(r=Object(b.a)(this,Object(v.a)(t).call(this,e,n))).handleChange=function(e){r.setState(function(t){return Object(wn.a)({},t,Object(vn.a)({},e.field,e.value))},function(){Ct.push("/exchange"),r.props.actions.setMarket({market:e.market})})},r.listCurrencies=function(){var e=r.props,t=e.supportedTokens,n=e.supportedAtomicTokens,a=[],o=t.concat(n).toArray();return Array.from(new Set(o)).forEach(function(e){if(G.get(e,X).pairs.size>0){var t=G.get(e,X),n=t.symbol,r=t.name,o=t.pairs;a.push({field:"fstCode",label:"".concat(n," \u2013 ").concat(r),name:r,symbol:n,value:e,market:o.first()})}}),a},r.listPairs=function(e){return G.get(e,X).pairs.map(function(e,t){var n=K.get(e,void 0);if(n){var r=n.orderSettlement,a=n.code,o=G.get(t,X),c=o.symbol,i=o.name;return{field:"sndCode",label:"".concat(c," \u2013 ").concat(i).concat(r===U.OrderSettlement.RenExAtomic?" (atomic)":""),name:i,symbol:c,value:t,orderSettlement:r,market:a}}}).valueSeq().toArray().filter(function(e){return void 0!==e})};var a,o,c=r.props.market,i=K.get(c,void 0);return i&&(o=(a=i.category||i.quoteToken)===i.quoteToken?i.baseToken:i.quoteToken),r.state={fstCode:a,sndCode:o},r}return Object(E.a)(t,e),Object(f.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.market,n=K.get(t,void 0);if(n){var r=this.state,a=r.fstCode,o=r.sndCode;t!==this.props.market&&(o=(a=n.category||n.quoteToken)===n.quoteToken?n.baseToken:n.quoteToken,this.setState({fstCode:a,sndCode:o}))}}},{key:"render",value:function(){var e=this.state,t=e.fstCode,n=e.sndCode;if(void 0===t||void 0===n)return o.createElement(o.Fragment,null);var r=this.listCurrencies(),a=this.listPairs(t);return o.createElement("div",{className:"order--currencies"},o.createElement(Nn.b,{className:"Select--currency",name:"fstCode",value:r.find(function(e){return e.value===t}),onChange:this.handleChange,options:r,components:{SingleValue:Bn,Option:Dn,Control:Ln},isClearable:!1,backspaceRemovesValue:!1,isDisabled:r.length<=1}),o.createElement(Nn.b,{className:"Select--currency",name:"sndCode",value:a.find(function(e){return e.value===n}),onChange:this.handleChange,options:a,components:{SingleValue:Bn,Option:Dn,Control:Ln},isClearable:!1,backspaceRemovesValue:!1,isDisabled:a.length<=1}))}}]),t}(o.Component),Rn=Object(s.b)(function(e){return{market:e.inputs.market,supportedTokens:e.sdk.supportedTokens,supportedAtomicTokens:e.sdk.supportedAtomicTokens}},function(e){return{actions:Object(j.b)({setMarket:qe},e)}})(Pn),Mn=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(b.a)(this,Object(v.a)(t).call(this,e))).enableWrap=function(){n.setState({wrap:!0})},n.disableWrap=function(){n.setState({wrap:!1})},n.checkDisable=function(){var e=n.props.usableAtomicBalances,t=n.state,r=t.wrap,a=t.isSubmitting,o=new M.a(n.state.inputValue),c=r?"BTC":"WBTC",i=e.get(c)||new M.a(0);return!(o.gt(0)&&o.lte(i))||a},n.handleSubmit=function(){var e=Object(m.a)(p.a.mark(function e(t){var r,a,o,c;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.state,a=r.wrap,o=r.inputValue,n.setState({isSubmitting:!0,error:null}),t.preventDefault(),c=a?n.wrap():n.unwrap(),e.abrupt("return",c.then(function(e){n.props.actions.addOrders([Ue(e)]),n.setState({isSubmitting:!1})}).catch(function(e){Object(z.c)(e,{description:"Error in WrapBitcoin.handleSubmit",shownToUser:"In WrapBitcoin as message box",wrap:a,inputValue:o}),n.setState({error:e.message,isSubmitting:!1})}));case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.wrap=Object(m.a)(p.a.mark(function e(){var t;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.sdk,e.abrupt("return",t.swapperd.wrap(n.state.inputValue,"BTC"));case 2:case"end":return e.stop()}},e,this)})),n.unwrap=Object(m.a)(p.a.mark(function e(){var t;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.sdk,e.abrupt("return",t.swapperd.unwrap(n.state.inputValue,"WBTC"));case 2:case"end":return e.stop()}},e,this)})),n.handleChange=function(){var e=Object(m.a)(p.a.mark(function e(t){var r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(r=t.target.value).indexOf("e")>=0&&(r=new M.a(r).toFixed()),n.setState({inputValue:r});case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.state={error:null,linkPending:!1,inputValue:"0",wrap:!0,isSubmitting:!1},n}return Object(E.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props,t=e.wrappingFeePercent,n=e.usableAtomicBalances,r=G.get("BTC",X),a=G.get("WBTC",X),c=this.state,i=c.isSubmitting,s=c.wrap,l=c.error,u=new M.a(this.state.inputValue);!u.isNaN()&&u.isFinite()||(u=new M.a(0));var d=s?r:a,p=n.get(d.symbol)||new M.a(0),m=s?a:r,h=u.times(t);return o.createElement("div",{className:"order--wrapper order--wrapper--tabbed"},o.createElement("ul",{className:"order--tabs"},o.createElement("li",{className:s?"active":"",role:"tab",onClick:this.enableWrap},o.createElement("span",null,"Wrap BTC")),o.createElement("li",{className:s?"":"active",role:"tab",onClick:this.disableWrap},o.createElement("span",null,"Unwrap WBTC"))),o.createElement("form",{onSubmit:this.handleSubmit},o.createElement("div",{className:"order--inputs"},o.createElement("div",{className:"order--input-wrapper"},o.createElement("label",null,o.createElement("div",{className:"order--title"},o.createElement("span",null,"Spend")),o.createElement("span",{className:"order--input-item"},o.createElement("input",{min:"0",step:".00000001",type:"number",value:this.state.inputValue,onChange:this.handleChange}),o.createElement("span",null,d.symbol))),p.lt(u)?o.createElement("p",{className:"order--warning"},"Insufficient ",d.symbol," balance"):!h.isEqualTo(0)&&o.createElement("p",{className:"order--message"},"You will spend ",new M.a(this.state.inputValue).plus(h).toFixed()," ",s?"BTC":"WBTC"," after fees.")),o.createElement("div",{className:"order--input-wrapper"},o.createElement("label",null,o.createElement("div",{className:"order--title"},o.createElement("span",null,"Receive")),o.createElement("span",{className:"order--input-item"},o.createElement("input",{min:"0",step:".00000001",type:"number",value:this.state.inputValue,onChange:this.handleChange,disabled:!0}),o.createElement("span",null,m.symbol))))),!h.isEqualTo(0)&&o.createElement("div",null,o.createElement("span",null,"Fee: ",h.toFixed()," ",d.symbol),o.createElement(Et,null,"Fees for ",s?"wrapping BTC":"unwrapping WBTC"," are set to ",t.times(100).toFixed(),"% of the order volume.")),o.createElement("div",{className:"order--footer"},o.createElement("button",{className:"order--button ".concat(i?"submitting":""),type:"submit",disabled:this.checkDisable()},o.createElement("span",null,i?o.createElement(tt.a,null):s?"Wrap BTC":"Unwrap WBTC"))),l&&"User rejected the swap"!==l&&o.createElement("div",null,o.createElement("p",{className:"order--warning"},l))))}}]),t}(o.Component),_n=Object(s.b)(function(e){return{sdk:e.sdk.sdk,atomConnectionStatus:e.trader.atomConnectionStatus,usableAtomicBalances:e.trader.usableAtomicBalances,wrappingFeePercent:e.sdk.wrappingFeePercent}},function(e){return{actions:Object(j.b)({updateAtomConnectionStatus:rt,addOrders:Ge},e)}})(Mn),In=function(e){function t(){return Object(h.a)(this,t),Object(b.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e,t=this.props,n=t.market,r=t.marketPrices,a=K.get(n,void 0);if(void 0===a)e=o.createElement("div",{className:"order--wrapper"},o.createElement("p",null,"Invalid market pair: ",n));else{var c=a.orderSettlement,i=a.fixedPrice?a.fixedPrice.toNumber():r.get(n,le).price;e=this.props.atomConnectionStatus!==U.AtomicConnectionStatus.ConnectedUnlocked&&c===U.OrderSettlement.RenExAtomic?o.createElement(it,null):n===F.WBTC_BTC?o.createElement(_n,null):o.createElement(An,{market:n,marketPrice:i,settlementType:c})}return o.createElement("div",{className:"section order"},o.createElement("div",{className:"container"},o.createElement(Jt,{title:"Submit an order"}),o.createElement(Rn,null),e))}}]),t}(o.Component),Fn=Object(s.b)(function(e){return{market:e.inputs.market,marketPrices:e.marketPrices.marketPrices,sdk:e.sdk.sdk,atomConnectionStatus:e.trader.atomConnectionStatus}},null)(In),Vn=function(e){function t(){var e,n;Object(h.a)(this,t);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(n=Object(b.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(a)))).render=function(){return o.createElement("div",{className:"exchange"},Gt(o.createElement(cn,null)),Gt(o.createElement(an,{withMenu:!0})),Gt(o.createElement(Zt,null)),o.createElement("div",{className:"content"},Gt(o.createElement(Fn,null)),Gt(o.createElement(hn,{recent:!0})),Gt(o.createElement(bn,{recent:!0})),Gt(o.createElement(yn,null))))},n}return Object(E.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){try{var e=window.location.href.split("/"),t=e[4],n=e[5];if(t&&n){var r=!0,a=!1,o=void 0;try{for(var c,i=K.valueSeq().toArray()[Symbol.iterator]();!(r=(c=i.next()).done);r=!0){var s=c.value;if(t.toUpperCase()===s.quoteToken&&n.toUpperCase()===s.baseToken){this.props.actions.setMarket({market:s.code});break}}}catch(l){a=!0,o=l}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}}}catch(u){Object(z.c)(u,{description:"Error in Exchange.componentDidMount",shownToUser:"No"})}}}]),t}(o.Component),Hn=Object(s.b)(null,function(e){return{actions:Object(j.b)({setMarket:qe},e)}})(Vn),Wn=n(148),Yn=n.n(Wn),zn=n(971),qn=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(b.a)(this,Object(v.a)(t).call(this,e))).getAccounts=Object(m.a)(p.a.mark(function e(){var t,r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.referrer,n.setState({error:null}),e.prev=2,e.next=5,n.props.getAccounts();case 5:r=e.sent,e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(2),n.setState({error:e.t0.message||e.t0.toString()}),e.abrupt("return");case 12:if(1!==r.length){e.next=16;break}return e.next=15,n.attemptVerification(r[0],t);case 15:return e.abrupt("return");case 16:n.setState({accounts:r});case 17:case"end":return e.stop()}},e,this,[[2,8]])})),n.onSelectAccount=function(){var e=Object(m.a)(p.a.mark(function e(t){var r,a,o,c;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.props.referrer,a=n.state.accounts,!(null===(o=parseInt(t.currentTarget.getAttribute("data-item")||"0",10))||null===a||a.length<o)){e.next=6;break}return console.error("No account selected"),e.abrupt("return");case 6:return c=a[o],e.next=9,n.attemptVerification(c,r);case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.attemptVerification=function(){var e=Object(m.a)(p.a.mark(function e(t,r){var a,o;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.props.url,o={address:t,referrer:r},e.prev=2,e.next=5,Yn.a.post("".concat(window.NETWORK.ingress,"/login"),JSON.stringify(o));case 5:if(!e.sent.data.verified){e.next=9;break}return n.props.resolve(t,a),e.abrupt("return");case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),Object(z.c)(e.t0,{description:"Error in SelectWeb3Account.attemptVerification",shownToUser:"No"});case 14:n.props.reject(t,ve.b);case 15:case"end":return e.stop()}},e,this,[[2,11]])}));return function(t,n){return e.apply(this,arguments)}}(),n.state={accounts:null,error:null},n}return Object(E.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=Object(m.a)(p.a.mark(function e(){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getAccounts();case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,n=t.accounts,r=t.error;return r?o.createElement("div",{className:"popup ledger"},o.createElement("h2",null,"Unable to retrieve accounts"),o.createElement("p",null,r),o.createElement("button",{onClick:this.getAccounts},"Retry")):o.createElement("div",{className:"popup accounts"},null!==n?o.createElement(o.Fragment,null,o.createElement("h2",null,"Select an account:"),n.map(function(t,n){return o.createElement("button",{key:n,"data-item":n,className:"account--button",onClick:e.onSelectAccount},o.createElement("div",{className:"account--left"},o.createElement(nn,{address:t})),o.createElement("div",{className:"account--right"},o.createElement("span",{className:"monospace"},t)))})):o.createElement(tt.a,null))}}]),t}(o.Component),Kn=Object(s.b)(function(e){return{sdk:e.sdk.sdk,url:e.trader.url}})(qn),Gn=function(e){function t(){var e,n;Object(h.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(b.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(a)))).handler=void 0,n.openWyreHandler=function(){n.handler.open()},n}return Object(E.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.closePopup;this.handler=new window.Wyre.Widget({accountId:window.WYRE_KEY,auth:{type:"metamask"},operation:{type:"none"},onSuccess:function(){t(),e.props.actions.setAlert({alert:new pe({message:"Your application was successfully submitted. Check back later to view the status of your application",alertType:ce.Success})})},onExit:function(n){null!=n&&(Object(z.c)(n,{description:"Error in VerificationPopup.onExit",shownToUser:"As alert"}),t(),e.props.actions.setAlert({alert:new pe({message:"There was an error submitting your application. Please try again later",alertType:ce.Error})}))}})}},{key:"render",value:function(){var e="".concat(location.protocol,"//").concat(location.host).concat(location.pathname);return o.createElement("div",{className:"popup kyc content"},o.createElement("h2",null,"Verify your account"),o.createElement("p",null,"Please submit a KYC application, or check back later to see if your application has been approved."),o.createElement("div",{className:"popup--buttons"},o.createElement("a",{href:"https://kyber.network/oauth/authorize?client_id=".concat(window.KYBER_KEY,"&redirect_uri=").concat(e,"&response_type=code&state=").concat(this.props.address,",").concat(this.props.wallet)},o.createElement("button",{className:"kyber--button"},o.createElement("span",null,"Login with Kyber"))),o.createElement("button",{className:"wyre--button",onClick:this.openWyreHandler},o.createElement("span",null,"Verify with Wyre"))),o.createElement("p",null,"Note: Wyre currently supports US residents only."))}}]),t}(o.Component),Xn=Object(s.b)(null,function(e){return{actions:Object(j.b)({setAlert:x},e)}})(Gn),Zn=function(e){function t(e,n){var r;return Object(h.a)(this,t),(r=Object(b.a)(this,Object(v.a)(t).call(this,e,n))).handleSelectWallet=Object(m.a)(p.a.mark(function e(){var t,n,c,i,s,l,u,d,h,f,b,v,E,g,w,O,k;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.props,n=t.sdk,c=t.wallet,i=t.seenMigrationMap,s=r.state.referrer,l=ve.e.get(c,void 0)){e.next=5;break}return e.abrupt("return");case 5:return a.configureScope(function(e){e.setExtra("wallet",l.slug)}),u=l.getWeb3Provider,r.setState({canceled:!1}),r.props.actions.storeWallet({wallet:c}),e.prev=9,e.next=12,u();case 12:f=e.sent,b=Object(B.a)(f,2),d=b[0],h=b[1],e.next=24;break;case 18:return e.prev=18,e.t0=e.catch(9),Object(z.c)(e.t0,{description:"Error in WalletItem.handleSelectWallet",shownToUser:"As alert"}),r.props.actions.setAlert({alert:new pe({message:e.t0.message})}),r.props.actions.storeWallet({wallet:null}),e.abrupt("return");case 24:v=Symbol(),E=function(){var e=Object(m.a)(p.a.mark(function e(t,a){var o;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=i.get(t,!1),e.next=3,r.props.actions.login(n,d,t,o,{redirect:!0,url:a});case 3:r.props.actions.clearPopup({uuid:v}),r.props.actions.setAlert({alert:new pe({message:"You have been successfully logged in",alertType:ce.Success})});case 5:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),g=function(){r.props.actions.clearPopup({uuid:v}),r.setState({canceled:!0})},w=function(e,t){if(t===ve.b){if(r.state.canceled)return;r.props.actions.setPopup({uuid:v,popup:o.createElement(Xn,{address:e,wallet:c,closePopup:g}),onCancel:g})}else g()},O=function(){var e=Object(m.a)(p.a.mark(function e(){var t,n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=new y.a(d),e.prev=1,!h){e.next=6;break}e.t0=h,e.next=9;break;case 6:return e.next=8,t.eth.getAccounts();case 8:e.t0=e.sent;case 9:n=e.t0,e.next=20;break;case 12:if(e.prev=12,e.t1=e.catch(1),c!==ve.d.Ledger||!e.t1.message.match(/invalid transport instance/)){e.next=18;break}throw Object(z.d)(new Error("Unable to connect to Ledger."));case 18:throw Object(z.c)(e.t1,{description:"Error in WalletItem.getAccounts",shownToUser:"In message box in SelectWeb3Popup"}),e.t1;case 20:if(0!==n.length){e.next=26;break}if(c!==ve.d.MetaMask){e.next=25;break}throw Object(z.d)(new Error("Please unlock your Metamask."));case 25:throw Object(z.d)(new Error("No accounts found. Your wallet may be locked."));case 26:if(c===ve.d.Ledger||c===ve.d.Keystore){e.next=32;break}return e.next=29,t.eth.net.getNetworkType();case 29:if(e.sent===q.b.ethNetwork){e.next=32;break}throw Object(z.d)(new Error("Please ensure you are on the ".concat(q.b.ethNetworkLabel," network")));case 32:return e.abrupt("return",n);case 33:case"end":return e.stop()}},e,this,[[1,12]])}));return function(){return e.apply(this,arguments)}}(),k={uuid:v,popup:o.createElement(Kn,{referrer:s,getAccounts:O,resolve:E,reject:w,message:"Select account"}),onCancel:g},r.props.actions.setPopup(k);case 31:case"end":return e.stop()}},e,this,[[9,18]])})),r.state={referrer:"",canceled:!1},r}return Object(E.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){if(-1!==window.location.href.indexOf("?ref=")){var e=er("ref");null!=e&&""!==e&&""===this.state.referrer&&this.setState({referrer:e})}}},{key:"render",value:function(){var e=this.props.wallet,t=ve.e.get(e,void 0);if(void 0===t)return o.createElement(o.Fragment,null);var n=t.slug,r=t.enabled,a=t.description,c=t.name;return o.createElement("div",{className:"wallets--container ".concat(n," ").concat(r?"":"disabled")},o.createElement("div",{className:"wallets--item",role:"button",onClick:this.handleSelectWallet},o.createElement("span",{className:"wallets--title"},c),o.createElement("p",{className:"wallets--description"},r?null:"Coming soon",r&&""!==a?a:null)))}}]),t}(o.Component),Jn=Object(s.b)(function(e){return{sdk:e.sdk.sdk,url:e.trader.url,seenMigrationMap:e.trader.seenMigrationMap}},function(e){return{actions:Object(j.b)({setAlert:x,storeWallet:Qe,setPopup:A.b,clearPopup:A.a,login:Pt},e)}})(Zn),$n=function(e){function t(e,n){var r;return Object(h.a)(this,t),(r=Object(b.a)(this,Object(v.a)(t).call(this,e,n))).listWallets=function(){return ve.f.map(function(e,t){return o.createElement(Jn,{key:t,wallet:e})})},r}return Object(E.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return o.createElement("div",{className:"section wallets"},o.createElement("div",{className:"container"},o.createElement("div",{className:"wallets--wrapper"},this.listWallets()),o.createElement("p",{className:"wallets--disclaimer"},"Your trades and transactions are stored locally within your browser.")))}}]),t}(o.Component),Qn=Object(s.b)(null,function(e){return{actions:Object(j.b)({},e)}})($n),er=function(e){var t=e.replace(/[\[\]]/g,"\\$&"),n=new RegExp("[?&]".concat(t,"(=([^&#]*)|&|#|$)")).exec(window.location.href);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null},tr=function(e){function t(e,n){var r;return Object(h.a)(this,t),(r=Object(b.a)(this,Object(v.a)(t).call(this,e,n))).state={checkingVerification:!1},r}return Object(E.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=Object(m.a)(p.a.mark(function e(){var t,n,r,a,o,c;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.actions.storeWallet({wallet:null}),-1===window.location.href.indexOf("?code=")){e.next=30;break}return this.setState({checkingVerification:!0}),e.prev=3,e.next=6,this.kyberVerification();case 6:c=e.sent,t=c.verified,n=c.address,r=c.kyberUID,a=c.wallet,o=c.alert,e.next=17;break;case 14:e.prev=14,e.t0=e.catch(3),Object(z.c)(e.t0,{description:"Error in Home.componentDidMount.kyberVerification",shownToUser:"No"});case 17:if(!t||void 0===n||void 0===r||void 0===a){e.next=28;break}return e.prev=18,e.next=21,this.handleForwardLogin(n,a);case 21:e.next=26;break;case 23:e.prev=23,e.t1=e.catch(18),Object(z.c)(e.t1,{description:"Error in Home.componentDidMount.handleForwardLogin",shownToUser:"No"});case 26:e.next=29;break;case 28:!t&&o&&this.props.actions.setAlert({alert:o});case 29:this.setState({checkingVerification:!1});case 30:case"end":return e.stop()}},e,this,[[3,14],[18,23]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.checkingVerification;return this.props.address?o.createElement(zn.a,{to:"/exchange"}):o.createElement("div",{className:"home"},e&&o.createElement(o.Fragment,null,o.createElement("div",{className:"popup"},o.createElement(tt.a,null)),o.createElement("div",{className:"overlay"})),Gt(o.createElement(cn,null)),Gt(o.createElement(an,{withMenu:!1})),Gt(o.createElement(Qn,null)),o.createElement("div",{className:"content"},Gt(o.createElement(yn,null))))}},{key:"kyberVerification",value:function(){var e=Object(m.a)(p.a.mark(function e(){var t,n,r,a,o,c,i,s,l,u;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=er("code"),!(n=er("state"))){e.next=28;break}return r=n.split(",")[0],a=parseInt(n.split(",")[1],void 0),o="".concat(location.protocol,"//").concat(location.host).concat(location.pathname),c={address:r,request:{grant_type:"authorization_code",code:t,redirect_uri:o,client_id:window.KYBER_KEY}},e.prev=7,e.next=10,Yn.a.post("".concat(window.NETWORK.ingress,"/kyber"),JSON.stringify(c));case 10:if(i=e.sent,s=i.data.uid,l=i.data.active_wallets.map(function(e){return e.toLowerCase()}),r){e.next=15;break}throw new Error("Unable to retrieve address from Kyber response");case 15:if("approved"===i.data.kyc_status){e.next=17;break}throw new Error("Received unexpected Kyber status: ".concat(i.data.kyc_status));case 17:if(-1!==l.indexOf(r.toLowerCase())){e.next=19;break}throw Object(z.d)(new Error("Address ".concat(r," not authorized with Kyber")));case 19:return e.abrupt("return",{verified:!0,address:r,kyberUID:s,wallet:a});case 22:return e.prev=22,e.t0=e.catch(7),e.t0.response&&401===e.t0.response.status||e.t0.message&&e.t0.message.match("not authorized with Kyber")?u=new pe({message:"".concat(r," has not been verified with your Kyber account. Please verify and check back later.")}):(Object(z.c)(e.t0,{description:"Error in kyberVerification",shownToUser:"As alert"}),u=new pe({message:"Unable to retrieve account verification details. Please try again later."})),e.abrupt("return",{verified:!1,alert:u});case 26:e.next=30;break;case 28:return Object(z.c)(new Error("Not enough information for Kyber KYC"),{description:"Error caught in Home.kyberVerification",shownToUser:"No"}),e.abrupt("return",{verified:!1});case 30:case"end":return e.stop()}},e,this,[[7,22]])}));return function(){return e.apply(this,arguments)}}()},{key:"handleForwardLogin",value:function(){var e=Object(m.a)(p.a.mark(function e(t,n){var r,a,o,c,i,s,l,u,d,m;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.props,a=r.actions,o=r.sdk,c=r.url,i=r.seenMigrationMap,s=ve.e.get(n,void 0)){e.next=4;break}throw new Error("Logged in to an invalid wallet.");case 4:return e.next=6,s.getWeb3Provider(t);case 6:return l=e.sent,u=Object(B.a)(l,1),d=u[0],e.next=11,Object(At.c)(new y.a(d),t);case 11:if(!e.sent){e.next=17;break}return m=i.get(t,!1),e.next=15,a.login(o,d,t,m,{redirect:!0,url:c});case 15:return a.setAlert({alert:new pe({message:"Successfully logged in via Kyber verification",alertType:ce.Success})}),e.abrupt("return");case 17:throw new Error("Logged in to a non-verified address.");case 18:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()}]),t}(o.Component),nr=Object(s.b)(function(e){return{sdk:e.sdk.sdk,address:e.trader.address,url:e.trader.url,seenMigrationMap:e.trader.seenMigrationMap}},function(e){return{actions:Object(j.b)({login:Pt,storeWallet:Qe,setAlert:x},e)}})(tr),rr=function(){return o.createElement("div",{className:"logging-out"},o.createElement(tt.a,null))},ar=function(){return o.createElement("div",{className:"orders"},Gt(o.createElement(cn,null)),Gt(o.createElement(an,{withMenu:!0})),Gt(o.createElement(Zt,null)),o.createElement("div",{className:"content"},Gt(o.createElement(hn,null)),Gt(o.createElement(bn,null))))},or=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(b.a)(this,Object(v.a)(t).call(this,e))).onClickHandler=function(){var e=n.props.popups.last(),t=e.dismissible,r=e.onCancel;t&&r()},n}return Object(E.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this;return 0===this.props.popups.size?o.createElement(o.Fragment,null):this.props.popups.valueSeq().map(function(t,n){var r=t.popup,a=t.onCancel;return o.createElement("div",{key:n,className:"popup--outer"},o.createElement("div",{role:"none",className:"overlay",onClick:e.onClickHandler}),Gt(r,{popup:!0,onCancel:a}))})}}]),t}(o.Component),cr=Object(s.b)(function(e){return{popups:e.popup.stack}})(or),ir=Object(S.createStandardAction)("AGREE_TO_TERMS")(),sr=function(e){function t(e,n){var r;return Object(h.a)(this,t),(r=Object(b.a)(this,Object(v.a)(t).call(this,e,n))).handleScroll=function(e){e.currentTarget.scrollHeight-e.currentTarget.scrollTop<=e.currentTarget.clientHeight+30&&r.setState({scrollBottom:!0})},r.handleAgreement=function(){r.props.actions.agreeToTerms({agreedToTerms:!0}),r.props.onDone()},r.state={scrollBottom:!1},r}return Object(E.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.state.scrollBottom;return o.createElement("div",{className:"popup terms"},o.createElement("h2",null,"End User License Agreement"),o.createElement("div",{className:"terms--content",onScroll:this.handleScroll},o.createElement("p",null,"Please read this EULA carefully, as it sets out the basis upon which we license the Software for use. Before you download the Software from our website, we will ask you to give your express agreement to the provisions of this EULA. By agreeing to be bound by this EULA, you further agree that any person you authorise to use the Software will comply with the provisions of this EULA."),o.createElement("p",null,o.createElement("b",null,"AGREEMENT")),o.createElement("ol",null,o.createElement("li",null,"Definitions",o.createElement("ol",null,o.createElement("li",null,"Except to the extent expressly provided otherwise, in this EULA:",o.createElement("br",null),"\u201cDappbase Ventures Limited\u201d means the company incorporated in the British Virgin Islands (company number 1959524), with its registered office at Vistra Corporate Services Centre, Wickhams Cay II, Road Town, Tortola, VG 1110, British Virgin Islands;",o.createElement("br",null),"\u201cDocumentation\u201d means the documentation for the Software produced by the Licensor and delivered or made available by the Licensor to the User;",o.createElement("br",null),"\u201cEffective Date\u201d means the date upon which the User gives the User's express consent to this EULA, following the issue of this EULA by the Licensor;",o.createElement("br",null),"\u201cEULA\u201d means this end user licence agreement, including any amendments to this end user licence agreement from time to time;",o.createElement("br",null),"\u201cFees\u201d means the fees imposed on the User by the Licensor as specified on the Licensor\u2019s website at ",o.createElement("a",{href:"https://republicprotocol.com/",target:"_blank",rel:"noopener noreferrer"},"https://republicprotocol.com/"),";",o.createElement("br",null),"\u201cForce Majeure Event\u201d means an event, or a series of related events, that is outside the reasonable control of the party affected (including failures of the internet or any public telecommunications network, hacker attacks, denial of service attacks, virus or other malicious software attacks or infections, power failures, industrial disputes affecting any third party, changes to the law, disasters, explosions, fires, floods, riots, terrorist attacks and wars);",o.createElement("br",null),"\u201cIntellectual Property Rights\u201d means all intellectual property rights wherever in the world, whether registrable or unregistrable, registered or unregistered, including any application or right of application for such rights (and these \u201cintellectual property rights\u201d include copyright and related rights, database rights, confidential information, trade secrets, know-how, business names, trade names, trademarks, service marks, passing off rights, unfair competition rights, patents, petty patents, utility models, semi-conductor topography rights and rights in designs);",o.createElement("br",null),"\u201cLicensor\u201d means Dappbase Ventures Limited (the company that owns the businesses associated with \u201cRenEx\u201d, and the \u201cRepublic Protocol\u201d trademark name), a company incorporated in the British Virgin Islands (company number 1959524), with its registered office at Vistra Corporate Services Centre, Wickhams Cay II, Road Town, Tortola, VG 1110, British Virgin Islands;",o.createElement("br",null),"\u201cMaintenance Services\u201d means the supply to the User and application to the Software of Updates and Upgrades;",o.createElement("br",null),"\u201cMinimum Term\u201d means, in respect of this EULA, the period of 12 months beginning on the Effective Date;",o.createElement("br",null),"\u201cPayments\u201d means the method for payment of fees imposed on the User by the Licensor as specified on the Licensor\u2019s website at ",o.createElement("a",{href:"https://republicprotocol.com/",target:"_blank",rel:"noopener noreferrer"},"https://republicprotocol.com/"),";",o.createElement("br",null),"\u201cRenEx\u201d means the software platform provided by the Licensor that facilitates a decentralized dark pool exchange under the \u201cRepublic Protocol\u201d trademark for the trading of digital assets;",o.createElement("br",null),"\u201cRepublic Protocol\u201d means the trademark name under which the Licensor operates the its platform protocol for the building and operating of decentralized dark pool exchanges, including the RenEx dark pool exchange platform, including all related research, development and commercial activities;",o.createElement("br",null),"\u201cServices\u201d means any services that the Licensor provides to the User, or has an obligation to provide to the User, under this EULA;",o.createElement("br",null),"\u201cSoftware\u201d means software relating to the RenEx dark pool platform operated under the Republic Protocol trademark by the Licensor;",o.createElement("br",null),"\u201cSoftware Defect\u201d means a defect, error or bug in the Software having a material adverse effect on the appearance, operation, functionality or performance of the Software, but excluding any defect, error or bug caused by or arising as a result of:",o.createElement("ol",{type:"a"},o.createElement("li",null,"any act or omission of the User or any person authorised by the User to use the Software;"),o.createElement("li",null,"any use of the Software contrary to the Documentation by the User or any person authorised by the User to use the Software;"),o.createElement("li",null,"a failure of the User to perform or observe any of its obligations in this EULA; and/or"),o.createElement("li",null,"an incompatibility between the Software and any other system, network, application, program, hardware or software not specified as compatible in the Software Specification;")),"\u201cSoftware Specification\u201d means the specification for the Software set out in the Documentation;",o.createElement("br",null),"\u201cSource Code\u201d means the Software code in human-readable form or any part of the Software code in human-readable form, including code compiled to create the Software or decompiled from the Software, but excluding interpreted code comprised in the Software;",o.createElement("br",null),"\u201cSupport Services\u201d means support in relation to the use of the Software and the identification and resolution of errors in the Software, but shall not include the provision of training services whether in relation to the Software or otherwise;",o.createElement("br",null),"\u201cTerm\u201d means the term of this EULA, commencing in accordance with Clause 3.1 and ending in accordance with Clause 3.2;",o.createElement("br",null),"\u201cUpdate\u201d means a hotfix, patch or minor version update to the Software;",o.createElement("br",null),"\u201cUpgrade\u201d means a major version upgrade of the Software;",o.createElement("br",null),"\u201cUser\u201d means the person to whom the Licensor grants a right to use the Software under this EULA; and",o.createElement("br",null),"\u201cUser Indemnity Event\u201d has the meaning given to it in Clause 13.1."))),o.createElement("li",null,"Credit",o.createElement("ol",null,o.createElement("li",null,"This document was created using a template from SEQ Legal (",o.createElement("a",{href:"https://seqlegal.com",target:"_blank",rel:"noopener noreferrer"},"https://seqlegal.com"),")."))),o.createElement("li",null,"Term",o.createElement("ol",null,o.createElement("li",null,"This EULA shall come into force upon the Effective Date."),o.createElement("li",null,"This EULA shall continue in force indefinitely, subject to termination in accordance with Clause 15 or any other provision of this EULA."))),o.createElement("li",null,"Licence",o.createElement("ol",null,o.createElement("li",null,"The Licensor hereby grants to the User from the date of supply of the Software to the User until the end of the Term a worldwide, non-exclusive licence to:",o.createElement("ol",{type:"a"},o.createElement("li",null,"install the Software; and"),o.createElement("li",null,"use the Software in accordance with the Documentation.")),"subject to the limitations and prohibitions set out and referred to in this Clause 4."),o.createElement("li",null,"The User may not sub-license and must not purport to sub-license any rights granted under Clause 4.1."),o.createElement("li",null,"Save to the extent expressly permitted by this EULA or required by applicable law on a non-excludable basis, any licence granted under this Clause 4 shall be subject to the following prohibitions:",o.createElement("ol",{type:"a"},o.createElement("li",null,"the User must not sell, resell, rent, lease, loan, supply, publish, distribute or redistribute the Software;"),o.createElement("li",null,"the User must not alter, edit or adapt the Software; and"),o.createElement("li",null,"the User must not decompile, de-obfuscate or reverse engineer, or attempt to decompile, de-obfuscate or reverse engineer, the Software."))),o.createElement("li",null,"The User shall be responsible for the security of copies of the Software supplied to the User under this EULA (or created from such copies) and shall use all reasonable endeavours (including all reasonable security measures) to ensure that access to such copies is restricted to persons authorised to use them under this EULA."))),o.createElement("li",null,"Source Code",o.createElement("ol",null,o.createElement("li",null,"Nothing in this EULA shall give to the User or any other person any right to access or use the Source Code or constitute any licence of the Source Code."))),o.createElement("li",null,"Maintenance Services",o.createElement("ol",null,o.createElement("li",null,"The Licensor may provide Maintenance Services to the User at its absolute own discretion. The Licensor is under no obligation to the User to provide such Maintenance Services, except as it determines from time to time in line with any technical and/or operational needs it may identify."))),o.createElement("li",null,"Support Services",o.createElement("ol",null,o.createElement("li",null,"The Licensor may provide Support Services to the User at its absolute own discretion. The Licensor is under no obligation to the User to provide such Support Services, except as it determines from time to time in line with any technical and/or operational needs it may identify."))),o.createElement("li",null,"No assignment of Intellectual Property Rights",o.createElement("ol",null,o.createElement("li",null,"Nothing in this EULA shall operate to assign or transfer any Intellectual Property Rights from the Licensor to the User, or from the User to the Licensor."))),o.createElement("li",null,"Fees",o.createElement("ol",null,o.createElement("li",null,"The User shall pay any relevant Fees that may be imposed by the Licensor for the use of its software, as specified on its website at ",o.createElement("a",{href:"https://republicprotocol.com/",target:"_blank",rel:"noopener noreferrer"},"https://republicprotocol.com/")),o.createElement("li",null,"All amounts stated in or in relation to this EULA are, unless the context requires otherwise, stated on its website at ",o.createElement("a",{href:"https://republicprotocol.com/",target:"_blank",rel:"noopener noreferrer"},"https://republicprotocol.com/")))),o.createElement("li",null,"Payments",o.createElement("ol",null,o.createElement("li",null,"Any relevant Payments will be deducted by the Licensor from the User for the use of its Software in accordance with the processes outlined on its website at ",o.createElement("a",{href:"https://republicprotocol.com/",target:"_blank",rel:"noopener noreferrer"},"https://republicprotocol.com/")))),o.createElement("li",null,"Warranties",o.createElement("ol",null,o.createElement("li",null,"The Licensor warrants to the User that it has the legal right and authority to enter into this EULA and to perform its obligations under this EULA."),o.createElement("li",null,"The User warrants to the Licensor that it has the legal right and authority to enter into this EULA and to perform its obligations under this EULA."),o.createElement("li",null,"All of the parties' warranties and representations in respect of the subject matter of this EULA are expressly set out in this EULA. To the maximum extent permitted by applicable law, no other warranties or representations concerning the subject matter of this EULA will be implied into this EULA or any related contract."))),o.createElement("li",null,"Acknowledgements and warranty limitations",o.createElement("ol",null,o.createElement("li",null,"The User acknowledges that complex software is never wholly free from defects, errors and bugs; and subject to the other provisions of this EULA, the Licensor gives no warranty or representation that the Software will be wholly free from defects, errors and bugs."),o.createElement("li",null,"The User acknowledges that complex software is never entirely free from security vulnerabilities; and subject to the other provisions of this EULA, the Licensor gives no warranty or representation that the Software will be entirely secure."),o.createElement("li",null,"The User acknowledges that the Software is only designed to be compatible with that software specified as compatible in the Software Specification; and the Licensor does not warrant or represent that the Software will be compatible with any other software."),o.createElement("li",null,"The User acknowledges that the Licensor will not provide any legal, financial, accounting or taxation advice under this EULA or in relation to the Software; and, except to the extent expressly provided otherwise in this EULA, the Licensor does not warrant or represent that the Software or the use of the Software by the User will not give rise to any legal liability on the part of the User or any other person."))),o.createElement("li",null,"Indemnities",o.createElement("ol",null,o.createElement("li",null,'The User shall indemnify and shall keep indemnified the Licensor against any and all liabilities, damages, losses, costs and expenses (including legal expenses and amounts reasonably paid in settlement of legal claims) suffered or incurred by the Licensor and arising directly or indirectly as a result of any breach by the User of this EULA (a "User Indemnity Event").'),o.createElement("li",null,"The Licensor must:",o.createElement("ol",{type:"a"},o.createElement("li",null,"upon becoming aware of an actual or potential User Indemnity Event, notify the User;"),o.createElement("li",null,"provide to the User all such assistance as may be reasonably requested by the User in relation to the User Indemnity Event;"),o.createElement("li",null,"allow the User the exclusive conduct of all disputes, proceedings, negotiations and settlements with third parties relating to the User Indemnity Event; and"),o.createElement("li",null,"not admit liability to any third party in connection with the User Indemnity Event or settle any disputes or proceedings involving a third party and relating to the User Indemnity Event without the prior written consent of the User,")),"without prejudice to the User's obligations under Clause 13.1."),o.createElement("li",null,"The indemnity protection set out in this Clause 13 shall not be subject to the limitations and exclusions of liability set out in this EULA."))),o.createElement("li",null,"Limitations and exclusions of liability",o.createElement("ol",null,o.createElement("li",null,"Nothing in this EULA will:",o.createElement("ol",{type:"a"},o.createElement("li",null,"limit or exclude any liability for death or personal injury resulting from negligence;"),o.createElement("li",null,"limit or exclude any liability for fraud or fraudulent misrepresentation;"),o.createElement("li",null,"limit any liabilities in any way that is not permitted under applicable law; or"),o.createElement("li",null,"exclude any liabilities that may not be excluded under applicable law,")),"and, if a party is a consumer, that party's statutory rights will not be excluded or limited by this EULA, except to the extent permitted by law."),o.createElement("li",null,"The limitations and exclusions of liability set out in this Clause 14 and elsewhere in this EULA:",o.createElement("ol",{type:"a"},o.createElement("li",null,"are subject to Clause 14.1; and"),o.createElement("li",null,"govern all liabilities arising under this EULA or relating to the subject matter of this EULA, including liabilities arising in contract, in tort (including negligence) and for breach of statutory duty, except to the extent expressly provided otherwise in this EULA."))),o.createElement("li",null,"The Licensor will not be liable to the User in respect of any losses arising out of a Force Majeure Event."),o.createElement("li",null,"The Licensor will not be liable to the User in respect of any loss of profits or anticipated savings."),o.createElement("li",null,"The Licensor will not be liable to the User in respect of any loss of revenue or income."),o.createElement("li",null,"The Licensor will not be liable to the User in respect of any loss of business, contracts or opportunities."),o.createElement("li",null,"The Licensor will not be liable to the User in respect of any loss or corruption of any data, database or software."),o.createElement("li",null,"The Licensor will not be liable to the User in respect of any special, indirect or consequential loss or damage."),o.createElement("li",null,"The liability of the Licensor to the User under this EULA in respect of any event or series of related events shall not exceed the greater of:",o.createElement("ol",{type:"a"},o.createElement("li",null,"the total amount paid and payable by the User to the Licensor under this EULA."))),o.createElement("li",null,"The aggregate liability of the Licensor to the User under this EULA shall not exceed the greater of:",o.createElement("ol",{type:"a"},o.createElement("li",null,"the total amount paid and payable by the User to the Licensor under this EULA."))))),o.createElement("li",null,"Termination",o.createElement("ol",null,o.createElement("li",null,"The Licensor may terminate this EULA at its absolute own discretion by giving to the User written notice of termination."),o.createElement("li",null,"The User may terminate this EULA by giving to the Licensor not less than 30 days' written notice of termination, expiring at the end of any calendar month."),o.createElement("li",null,"Either party may terminate this EULA immediately by giving written notice of termination to the other party if:",o.createElement("ol",{type:"a"},o.createElement("li",null,"the other party commits any material breach of this EULA, and the breach is not remediable;"),o.createElement("li",null,"the other party commits a material breach of this EULA, and the breach is remediable but the other party fails to remedy the breach within the period of 30 days following the giving of a written notice to the other party requiring the breach to be remedied; or"),o.createElement("li",null,"the other party persistently breaches this EULA (irrespective of whether such breaches collectively constitute a material breach)."))),o.createElement("li",null,"Either party may terminate this EULA immediately by giving written notice of termination to the other party if:",o.createElement("ol",{type:"a"},o.createElement("li",null,"the other party:",o.createElement("ol",{type:"i"},o.createElement("li",null,"is dissolved;"),o.createElement("li",null,"ceases to conduct all (or substantially all) of its business;"),o.createElement("li",null,"is or becomes unable to pay its debts as they fall due;"),o.createElement("li",null,"is or becomes insolvent or is declared insolvent; or"),o.createElement("li",null,"convenes a meeting or makes or proposes to make any arrangement or composition with its creditors;"))),o.createElement("li",null,"an administrator, administrative receiver, liquidator, receiver, trustee, manager or similar is appointed over any of the assets of the other party;"),o.createElement("li",null,"an order is made for the winding up of the other party, or the other party passes a resolution for its winding up (other than for the purpose of a solvent company reorganisation where the resulting entity will assume all the obligations of the other party under this EULA); or"),o.createElement("li",null,"if that other party is an individual:",o.createElement("ol",{type:"i"},o.createElement("li",null,"that other party dies;"),o.createElement("li",null,"as a result of illness or incapacity, that other party becomes incapable of managing his or her own affairs; or"),o.createElement("li",null,"that other party is the subject of a bankruptcy petition or order."))))))),o.createElement("li",null,"Effects of termination",o.createElement("ol",null,o.createElement("li",null,"Upon the termination of this EULA, all of the provisions of this EULA shall cease to have effect, save that the following provisions of this EULA shall survive and continue to have effect (in accordance with their express terms or otherwise indefinitely): Clauses 1, 4.1, 10.1, 13, 14, 16, 17 and 18."),o.createElement("li",null,"Except to the extent that this EULA expressly provides otherwise, the termination of this EULA shall not affect the accrued rights of either party."),o.createElement("li",null,"Within 30 days following the termination of this EULA for any reason:",o.createElement("ol",{type:"a"},o.createElement("li",null,"the User must pay to the Licensor any Charges in respect of Services provided to the User before the termination of this EULA and in respect of licences in effect before the termination of this EULA; and"),o.createElement("li",null,"the Licensor must refund to the User any Charges paid by the User to the Licensor in respect of Services that were to be (but are not) provided to the User after the termination of this EULA and in respect of licences that were to be (but are not) in effect after the termination of this EULA,")),"without prejudice to the parties' other legal rights."),o.createElement("li",null,"For the avoidance of doubt, the licences of the Software in this EULA shall terminate upon the termination of this EULA; and, accordingly, the User must immediately cease to use the Software upon the termination of this EULA."),o.createElement("li",null,"Within 10 Business Days following the termination of this EULA, the User must:",o.createElement("ol",{type:"a"},o.createElement("li",null,"return to the Licensor or dispose of as the Licensor may instruct all media in its possession or control containing the Software; and"),o.createElement("li",null,"irrevocably delete from all computer systems in its possession or control all copies of the Software."))))),o.createElement("li",null,"General",o.createElement("ol",null,o.createElement("li",null,"No breach of any provision of this EULA shall be waived except with the express written consent of the party not in breach."),o.createElement("li",null,"If any provision of this EULA is determined by any court or other competent authority to be unlawful and/or unenforceable, the other provisions of this EULA will continue in effect. If any unlawful and/or unenforceable provision would be lawful or enforceable if part of it were deleted, that part will be deemed to be deleted, and the rest of the provision will continue in effect (unless that would contradict the clear intention of the parties, in which case the entirety of the relevant provision will be deemed to be deleted)."),o.createElement("li",null,"This EULA may not be varied except by a written document signed by or on behalf of each of the parties."),o.createElement("li",null,"The User hereby agrees that the Licensor may assign the Licensor's contractual rights and obligations under this EULA to any successor to all or a substantial part of the business of the Licensor from time to time. The User must not without the prior written consent of the Licensor assign, transfer or otherwise deal with any of the User's contractual rights or obligations under this EULA."),o.createElement("li",null,"This EULA is made for the benefit of the parties, and is not intended to benefit any third party or be enforceable by any third party. The rights of the parties to terminate, rescind, or agree any amendment, waiver, variation or settlement under or relating to this EULA are not subject to the consent of any third party."),o.createElement("li",null,"Subject to Clause 14.1, this EULA shall constitute the entire agreement between the parties in relation to the subject matter of this EULA, and shall supersede all previous agreements, arrangements and understandings between the parties in respect of that subject matter."),o.createElement("li",null,"This EULA shall be governed by and construed in accordance with the laws of the British Virgin Isles."),o.createElement("li",null,"The courts of the British Virgin Isles shall have exclusive jurisdiction to adjudicate any dispute arising under or in connection with this EULA."))),o.createElement("li",null,o.createElement("ol",null,o.createElement("li",null,"In this EULA, a reference to a statute or statutory provision includes a reference to:",o.createElement("ol",{type:"a"},o.createElement("li",null,"that statute or statutory provision as modified, consolidated and/or re-enacted from time to time; and"),o.createElement("li",null,"any subordinate legislation made under that statute or statutory provision."))),o.createElement("li",null,"The Clause headings do not affect the interpretation of this EULA."),o.createElement("li",null,'References in this EULA to "calendar months" are to the 12 named periods (January, February and so on) into which a year is divided.'),o.createElement("li",null,"In this EULA, general words shall not be given a restrictive interpretation by reason of being preceded or followed by words indicating a particular class of acts, matters or things."))))),o.createElement("p",null,"By proceeding, you accept the above EULA agreement as well as the ",o.createElement("a",{href:"/terms-and-conditions.pdf",target:"_blank",rel:"noopener noreferrer"},"Terms & Conditions")," and ",o.createElement("a",{href:"/privacy-policy.pdf",target:"_blank",rel:"noopener noreferrer"},"Privacy Policy"),"."),o.createElement("button",{disabled:!e,onClick:this.handleAgreement},o.createElement("p",null,"Accept & Continue")))}}]),t}(o.Component),lr=Object(s.b)(null,function(e){return{actions:Object(j.b)({agreeToTerms:ir,clearPopup:A.a},e)}})(sr),ur=function(e,t,n){return{uuid:e,popup:o.createElement(lr,{onDone:n}),dismissible:!1,onCancel:t}},dr=Object(w.a)(function(e){function t(){return Object(h.a)(this,t),Object(b.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(f.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.location!==e.location&&window.scrollTo(0,0)}},{key:"render",value:function(){return o.createElement(o.Fragment,null)}}]),t}(o.Component)),pr=function(e){function t(e,n){var r;return Object(h.a)(this,t),(r=Object(b.a)(this,Object(v.a)(t).call(this,e,n))).withAccount=function(e){var t=r.props.address;if(r.state.checkingReLogin)return function(){return o.createElement(rr,null)};if(!t){var n=window.location.pathname;return"/"!==n&&"/loading"!==n&&(r.props.actions.setAlert({alert:new pe({message:"You are not logged in. Please select your wallet to continue",alertType:ce.Warning})}),r.props.actions.storeURL(n)),function(){return o.createElement(O.a,{to:"/"})}}return e},r.handleReLogin=Object(m.a)(p.a.mark(function e(){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(m.a)(p.a.mark(function e(t){var n,a,o,c,i,s,l,u;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(setTimeout(function(){t(!1)},5e3),n=r.props,a=n.address,o=n.actions,c=n.sdk,i=n.url,s=n.seenMigrationMap,!a){e.next=24;break}return e.prev=3,e.next=6,Object(Mt.b)();case 6:l=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),t(!1),e.abrupt("return");case 13:return e.next=15,Object(At.c)(new y.a(l),a);case 15:if(!e.sent){e.next=24;break}return c.updateProvider(l),c.setAddress(a),u=s.get(a,!1),e.next=22,o.login(c,l,a,u,{redirect:!1,url:i});case 22:return t(!0),e.abrupt("return");case 24:return t(!1),e.abrupt("return");case 26:case"end":return e.stop()}},e,this,[[3,9]])}));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e,this)})),r.state={checkingReLogin:!1},r}return Object(E.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=Object(m.a)(p.a.mark(function e(){var t,n,r,a,o,c=this;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,n=t.agreedToTerms,r=t.sdk,this.setState({checkingReLogin:!0}),e.next=4,this.handleReLogin();case 4:if(e.sent){e.next=8;break}return e.next=8,this.props.actions.logout(r,{reload:!1});case 8:this.setState({checkingReLogin:!1}),n||(a=Symbol(),o=function(){return c.props.actions.clearPopup({uuid:a})},this.props.actions.setPopup(ur(a,o,o)));case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return o.createElement(k.a,{history:Ct},o.createElement("div",{className:"app"},Gt(o.createElement(qt,null)),o.createElement(dr,null),o.createElement(T.a,{path:"/",exact:!0,component:nr}),o.createElement(T.a,{path:"/exchange",component:this.withAccount(Hn)}),o.createElement(T.a,{path:"/orders",component:this.withAccount(ar)}),o.createElement(T.a,{path:"/balances",component:this.withAccount(pn)}),o.createElement(T.a,{path:"/loading",component:rr}),Gt(o.createElement(It,null)),Gt(o.createElement(cr,null))))}}]),t}(o.Component),mr=Object(s.b)(function(e){return{address:e.trader.address,agreedToTerms:e.trader.agreedToTerms,seenMigrationMap:e.trader.seenMigrationMap,sdk:e.sdk.sdk,url:e.trader.url}},function(e){return{actions:Object(j.b)({clearPopup:A.a,login:Pt,logout:Dt,setAlert:x,setPopup:A.b,storeURL:Ut},e)}})(pr),hr=n(373),fr=Object(j.c)({alert:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new me,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Object(S.getType)(x):return e.set("alert",t.payload.alert);case Object(S.getType)(C):return e.set("alert",new pe({message:""}));case Object(S.getType)(fe):var n=t.payload,r=n.id,a=n.method;return e.set("pendingAlerts",e.pendingAlerts.set(r,a));case Object(S.getType)(be):var o=t.payload.ids,c=e.pendingAlerts,i=!0,s=!1,l=void 0;try{for(var u,d=o[Symbol.iterator]();!(i=(u=d.next()).done);i=!0){var p=u.value;c=c.delete(p)}}catch(m){s=!0,l=m}finally{try{i||null==d.return||d.return()}finally{if(s)throw l}}return e.set("pendingAlerts",c);default:return e}},balanceHistory:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Object(S.getType)(He):var n=e.balanceHistory;return t.payload.map(function(e){n=n.set(e.txHash,e)}),e.set("balanceHistory",n).set("updateIndex",e.updateIndex+1);default:return e}},hiddenBook:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ne,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Object(S.getType)(Vt):return e.set("hiddenOrders",t.payload.hiddenOrders);default:return e}},inputs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Object(S.getType)(qe):return e.set("market",t.payload.market);case Object(S.getType)(Ke):return e.set("orderInputs",t.payload.orderInputs);default:return e}},marketPrices:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Object(S.getType)(Ft):var n=t.payload,r={price:n.price,percentChange:n.percentChange};return e.set("marketPrices",e.marketPrices.set(t.payload.pair,r));default:return e}},popup:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new he,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Object(S.getType)(A.b):document.documentElement.classList.add("noscroll");var n={popup:t.payload.popup,dismissible:!1!==t.payload.dismissible,onCancel:t.payload.onCancel};return e.set("stack",e.stack.set(t.payload.uuid,n));case Object(S.getType)(A.a):var r=e.stack.remove(t.payload.uuid);return 0===r.size&&document.documentElement.classList.remove("noscroll"),e.set("stack",r);default:return e}},traderBook:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Object(S.getType)(Ge):var n=t.payload,r=e.traderOrders;return n.map(function(e){r=r.set(e.id,e)}),e.set("traderOrders",r);case Object(S.getType)(Xe):var a=e.traderOrders.get(t.payload.orderID,void 0);return a?(a.swapServer,a=a.set("status",t.payload.orderStatus),e.set("traderOrders",e.traderOrders.set(a.id,a))):e;case Object(S.getType)(Ze):return e.set("cancelling",e.cancelling.set(t.payload.orderID,t.payload.orderCancelling));default:return e}},trader:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Object(S.getType)(Nt):return e.set("address",t.payload);case Object(S.getType)(Ut):return e.set("url",t.payload);case Object(S.getType)(Lt):return null===e.noLegacyBalances?e.set("noLegacyBalances",t.payload):e;case Object(S.getType)(Bt):return null===e.noLegacyOrders?e.set("noLegacyOrders",t.payload):e;case Object(S.getType)(Le):return e.set("legacyBalances",e.legacyBalances.set(t.payload.token,t.payload.balance));case Object(S.getType)(Be):return e.set("legacyBalances",t.payload.balances);case Object(S.getType)(Pe):return e.set("usableLegacyBalances",e.usableLegacyBalances.set(t.payload.token,t.payload.usableBalance));case Object(S.getType)(De):return e.set("usableLegacyBalances",t.payload.usableBalances);case Object(S.getType)(Re):return e.set("accountLegacyBalances",e.accountLegacyBalances.set(t.payload.token,t.payload.accountBalance));case Object(S.getType)(Me):return e.set("accountLegacyBalances",t.payload.accountBalances);case Object(S.getType)(Fe):return e.set("usableAtomicBalances",t.payload.usableAtomicBalances);case Object(S.getType)(_e):return e.set("atomicBalances",t.payload.atomicBalances);case Object(S.getType)(Ie):return e.set("atomicAddresses",t.payload.atomicAddresses);case Object(S.getType)(rt):return e.set("atomConnectionStatus",t.payload.atomConnectionStatus);case Object(S.getType)(ir):return e.set("agreedToTerms",t.payload.agreedToTerms);case Object(S.getType)(et):return e.set("seenMigrationMap",e.seenMigrationMap.set(t.payload.address,t.payload.seenMigration));case Object(S.getType)(Qe):return e.set("wallet",t.payload.wallet);default:return e}},sdk:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Object(S.getType)(Wt):return console.assert(void 0!==t.payload.sdk),window.sdk=t.payload.sdk,e.set("sdk",t.payload.sdk);case Object(S.getType)(Yt):return e.set("supportedTokens",t.payload.supportedTokens).set("supportedAtomicTokens",t.payload.supportedAtomicTokens).set("darknodeFeePercent",t.payload.darknodeFeePercent).set("wrappingFeePercent",t.payload.wrappingFeePercent).set("minEthTradeVolume",t.payload.minEthTradeVolume).set("supportedMarkets",t.payload.supportedMarkets);default:return e}}}),br=n(374),vr=n.n(br),Er=Object(l.a)(function(e,t){try{return e.serialize()}catch(n){throw console.error("Error serializing ".concat(t," (").concat(JSON.stringify(e),"): ").concat(n)),Object(z.a)(n,{description:"Error serializing local storage"}),n}},function(e,t){try{return(new oe).deserialize(e)}catch(n){throw console.error("Error deserializing ".concat(t," (").concat(JSON.stringify(e),"): ").concat(n)),Object(z.a)(n,{description:"Error deserializing local storage"}),n}},{whitelist:["trader"]}),gr={storage:vr.a,key:"root",whitelist:["trader"],transforms:[Er]},yr=[hr.a];var wr,Or,kr=(wr=gr,Or=fr,Object(l.b)(wr,Or));n(969);n.d(t,"store",function(){return Tr});var Tr=Object(j.d)(kr,j.a.apply(void 0,yr));a.init({dsn:window.SENTRY_DSN,release:window.RENEX_VERSION,environment:window.NETWORK.network}),a.configureScope(function(e){e.setExtra("loggedIn",!1),e.setExtra("caught",!1)}),i.render(Gt(o.createElement(s.a,{store:Tr},o.createElement(u.a,{loading:null,persistor:Object(l.c)(Tr)},o.createElement(mr,null)))),document.getElementById("root"))},722:function(e,t){},82:function(e,t,n){var r={"./btc.svg":935,"./dgx.svg":936,"./eth.svg":937,"./omg.svg":938,"./ren.svg":939,"./tusd.svg":940,"./wbtc.png":941,"./wbtc.svg":942,"./zrx.svg":943};function a(e){var t=o(e);return n(t)}function o(e){var t=r[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}a.keys=function(){return Object.keys(r)},a.resolve=o,e.exports=a,a.id=82},935:function(e,t,n){e.exports=n.p+"static/media/btc.dd58cd55.svg"},936:function(e,t,n){e.exports=n.p+"static/media/dgx.09966c0f.svg"},937:function(e,t,n){e.exports=n.p+"static/media/eth.ac24c334.svg"},938:function(e,t,n){e.exports=n.p+"static/media/omg.cbd0e5e9.svg"},939:function(e,t,n){e.exports=n.p+"static/media/ren.05a00b3b.svg"},940:function(e,t,n){e.exports=n.p+"static/media/tusd.c377a1ca.svg"},941:function(e,t,n){e.exports=n.p+"static/media/wbtc.a81a823b.png"},942:function(e,t,n){e.exports=n.p+"static/media/wbtc.8122efc9.svg"},943:function(e,t,n){e.exports=n.p+"static/media/zrx.7ede344d.svg"},969:function(e,t,n){}},[[377,2,1]]]);
//# sourceMappingURL=main.39099081.chunk.js.map